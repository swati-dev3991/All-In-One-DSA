//v2.1.64
!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).getVPAIDAd=e()}(function(){var q;return function n(r,a,o){function s(t,e){if(!a[t]){if(!r[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(u)return u(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}i=a[t]={exports:{}},r[t][0].call(i.exports,function(e){return s(r[t][1][e]||e)},i,i.exports,n,r,a,o)}return a[t].exports}for(var u="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(U,N,j){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;var s=null,L=242500,H="hidden",B="visible",d=1,c=5,F="100",W="1.0.259",z="inViewPercentage",G="unload",q="beforeunload",h=20,f=20,X=10,Y=.9;function e(e,t,i){i=i||"";try{i=e&&t in e?e[t]:i}catch(e){}return i}function J(e){return parseFloat(e,10)}function Q(e){return e===+e&&e===(0|e)}var o,n,r,u,l,p,$,K,a,m,Z,ee=navigator.sendBeacon?function(e,t){navigator.sendBeacon(e,t)}:function(e,t){(new Image).src=e+(t=t||"")},v=window,g=document,y=(e(v,"screen",s),e(v,"navigator",s)),b=(e(v,"location",s),e(y,"language",""),e(y,"platform",""),e(y,"userAgent","")),t=b.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i),te=RegExp.$1.toLowerCase(),ie=parseFloat(b.match(/version\/([\d]+)/i)&&RegExp.$1||t&&t[2]||""),w=(b.match(/((ip)(hone|ad|od)|playbook|hp-tablet)/i)&&RegExp.$1.toLowerCase(),b.match(/(android|blackberry|bb10|macintosh|webos|windows)/i)&&RegExp.$1.toLowerCase(),!1),A=!1,T=!1,E=!1,_=!1,ne=(new Date).getTime();function re(e){var t=1;try{""===(t=(v.getComputedStyle&&v.getComputedStyle(e,s)||e.currentStyle).opacity)&&(t=1)}catch(e){}return t}function ae(e,t){return re(e)<=t}function oe(e){var t={width:0,height:0,valid:!0};try{var i=v.getComputedStyle&&v.getComputedStyle(e,s)||e.currentStyle;t.width=J(i.width)||0,t.height=J(i.height)||0}catch(e){t.width=0,t.height=0,t.valid=!1}return t}function S(e,t,i){e=oe(e);return e.width<=t||e.height<=i}function se(e,t,i,n,r){if(r=r||function(){return!0},!S(e,i,n))return e;for(var a=0;a<t.length;a++)for(var o=e.getElementsByTagName(t[a]),s=0;s<o.length;s++)if(!S(o[s],i,n)&&r(o[s]))return o[s]}function k(e,t){l=0<arguments.length&&Q(e)&&Q(t)?(p=e,t):(e=function(){var t,i;if(T)try{t=g.documentElement&&Math.max(g.documentElement.clientWidth,g.documentElement.scrollWidth)||v.frameElement&&v.frameElement.width||s,i=g.documentElement&&Math.max(g.documentElement.clientHeight,g.documentElement.scrollHeight)||v.frameElement&&v.frameElement.height||s}catch(e){t=v.innerWidth||g.body&&g.body.clientWidth||s,i=v.innerHeight||g.body&&g.body.clientHeight||s}else{var e=oe(m);t=e.width||s,i=e.height||s}return[t,i]}(),p=e[0],e[1]),K=($=L<=p*l)?30:50}try{var i=v.parent,I=v.top;A=!(!I||!i||I!=i||I==v),T=!(!i||i==v)}catch(e){}function ue(e,t,i,n,r,a){if(!(i<h||n<f)){for(var o=function(e,t,i,n){for(var r=[],a=Math.floor(t/n),o=Math.floor(i/n),s=Math.max(0,e.left),u=e.top,l=1;l<n;l++)for(var d=s+a*l,c=1;c<n;c++)r[r.length]=[d,u+o*c];return r}(t,i,n,X),s=0,u=0,l=o.length;u<l;u++){var d=o[u][0],c=o[u][1],d=a&&a.elementFromPoint&&a.elementFromPoint(d,c);d&&d!==e&&!function(e,t){for(var i=t&&t.parentNode;null!==i;){if(i===e)return 1;i=i.parentNode}}(e,d)&&!function(e,t){if("IFRAME"===e.nodeName&&"IFRAME"===t.nodeName)for(var i=e.contentWindow;i!==v.top;)if((i=i.parent).frameElement===t)return 1}(e,d)&&re(d)>Y&&!function e(t){var i=v.top.getComputedStyle?v.top.getComputedStyle(t,null):t.currentStyle;if("none"===i.display||"hidden"===i.visibility)return 1;if("img"!==t.tagName.toLowerCase()&&"video"!==t.tagName.toLowerCase()&&("transparent"===i.backgroundColor||0===parseFloat(i.backgroundColor.split(",")[3]))){for(var n=0;n<t.childNodes.length;n++)if(!e(t.childNodes[n]))return;return 1}}(d)&&s++}return 100-s/o.length*100<r}}function le(e,t){var i;return t=void 0===t?{top:0,left:0}:t,e!==e.top&&(i=e.frameElement.getBoundingClientRect(),t.left+=i.left,t.top+=i.top,t=le(e.parent,t)),t}function de(){try{var e=function(){var e,t;try{if(T){if(!E)return s;e=v.top.document,t=v.top}else e=g,t=v;return{height:t.innerHeight||e.documentElement.clientHeight||e.body&&e.body.clientHeight,width:t.innerWidth||e.documentElement.clientWidth||e.body&&e.body.clientWidth}}catch(e){return s}}();if(T&&e)for(var t=["div","video","iframe"],i=0;i<t.length;i++)for(var n=g.body.getElementsByTagName(t[i]),r=0;r<n.length;r++)if(function e(t){if("img"===t.tagName.toLowerCase()||"video"===t.tagName.toLowerCase())return 1;for(var i=0;i<t.childNodes.length;i++)if(e(t.childNodes[i]))return 1}(n[r])&&!S(n[r],h,f)){var a=n[r].getBoundingClientRect(),o=le(v,{top:a.top,left:a.left});if(o&&(o.left>=e.width||o.left+a.width<=0||o.top>=e.height||o.top+a.height<=0))return 1}}catch(e){}return 0}function ce(){return(he(h,f)<<1)+(he(5,5)<<2)+((function(e,t,i,n){if(n=n||function(){return!0},!ae(e,t))return e;for(var r=0;r<i.length;r++)for(var a=e.getElementsByTagName(i[r]),o=0;o<a.length;o++)if(!ae(a[o],t)&&n(a[o]))return a[o]}(m,0,["div","iframe"])?0:1)<<3)}function he(e,t){var i;try{i=se(m,["div","video","iframe","ins"],e,t)}catch(e){}return i?0:1}function fe(e,t){a=e;try{E=!!v.top.document}catch(e){}o=E&&A?v.parent:v,_=v.$sf&&v.$sf.ext&&"function"==typeof v.$sf.ext[z]||!1;try{w=/((iPhone|iPod|iPad).*AppleWebKit(?!.*(Safari|CriOS)))/i.test(b)||"chrome"===te&&(/wv\).* Chrome.* Mobile/i.test(b)||/Version\/\d*\.\d* (?:Chrome.* Mobile)?/i.test(b))||/(MSAppHost\/.*|WebView)/.test(b)}catch(e){}if(n=-1!==b.indexOf("Chrome/")?1:-1!==b.indexOf("Firefox/")?2:-1!==b.indexOf("; MSIE")?3:-1!==b.indexOf("Safari/")?4:-1!==b.indexOf("WebKit")?5:-1!==b.indexOf("Gecko")?6:7,void 0!==g.hidden?(r="hidden",u="visibilitychange"):void 0!==g.mozHidden?(r="mozHidden",u="mozvisibilitychange"):void 0!==g.webkitHidden?(r="webkitHidden",u="webkitvisibilitychange"):void 0!==g.msHidden&&(r="msHidden",u="msvisibilitychange"),t)m=t;else if(T)if(E)try{m=v.frameElement}catch(e){m=s}else{e=se(m=g.body||s,["div","video"],h,f);e&&(m=e)}else m=a&&(a.parentElement||a.parentNode)||s;var i;return 0!==ce()&&(i=setInterval(function(){0===ce()&&clearInterval(i)},1e3),setTimeout(function(){i&&clearInterval(i)},1e4)),a!==s&&void 0!==a&&m!==s&&void 0!==m}function C(e,t){return Math.floor((t-e)/1e3)}function V(e,t,i){(i=i||v).addEventListener?i.addEventListener(e,t):i.attachEvent&&i.attachEvent("on"+e,t)}function P(e,t,i){(i=i||v).removeEventListener?i.removeEventListener(e,t):i.detachEvent&&i.detachEvent("on"+e,t)}function pe(e,t){for(var i,n,r,a=d<e?e-d:0,o=d<t?t-d:0,s=[],u={},l=.5;l<c;l+=1)for(n=Math.round(l*a/c),i=.5;i<c;i+=1)u[r=n+"_"+Math.round(i*o/c)]||(s.push(r),u[r]=1);return s}function me(r){var e=(new Date).getTime();r.scr=1,r.sct||(r.sct=C(ne,e)),r.scrollStartTime&&0!==r.scrollStartTime||(r.scrollStartTime=e,r.scrollStartY=o.scrollY),Z||clearTimeout(Z),Z=setTimeout(function(){var e,t,i,n;e=r,t=(new Date).getTime(),t=C(e.scrollStartTime,t),i=o.scrollY-e.scrollStartY,n=(n=o.document.body.clientHeight)||o.document.body.height,(n=Math.round(o.scrollY/n*100))>e.scd&&(e.scd=n),0<i?(e.scrolledDownPixels+=i,e.scrolledDownTime+=t):(e.scrolledUpPixels-=i,e.scrolledUpTime+=t),e.scrollStartTime=0},250)}function ve(i){V("mouseover",function(){var e,t;e=i,t=(new Date).getTime(),e.hov=1,e.tth||(e.tth=C(ne,t)),e.hoverStartTime=t}),V("mouseout",function(){var e,t;e=i,t=(new Date).getTime(),500<C(e.hoverStartTime,t)&&(e.intt=1,e.intl=t,e.tti=C(ne,t))})}function ge(e){var t=(new Date).getTime();g[r]&&0<e.dwellStartTime?e.adt+=C(e.dwellStartTime,t):(e.foc=1,e.dwellStartTime=t)}var O={w:0,h:0,mw:-1,mh:-1,bl:-1,bt:-1,ew:-1,eh:-1,ex:-1,ey:-1,vw:-1,vh:-1,sx:-1,sy:-1,ivp:-1,ivd:-1,pt:-1,mi:-1,b:-1,gm0:0,gm1:0,m:-1,tivt:0,hov:2,tth:0,intt:2,intl:0,tti:0,st:0,foc:2,adt:0,scr:2,scd:0,svd:0,svu:0,sct:0,mivp:0,mivt:0,ls:0,winl:"",winr:"",lvl:0,al:3,ae:0,bct:2,ph:-1,dwellStartTime:0,scrolledUpPixels:0,scrolledUpTime:0,scrolledDownPixels:0,scrolledDownTime:0,avoc:0,avoc_debug:0,firstInViewTime:Number.MAX_SAFE_INTEGER};function ye(){var e,t,a;T&&ve(O),e=O,g[r]||ge(e),V(u,function(){ge(e)},g),(!T||E&&A)&&(t=O,V("scroll",function(){me(t)},o)),a=v.onerror,v.onerror=function(e,t,i,n,r){return O.ae+=1,!!a&&a(e,t,i,n,r)}}(new Date).getTime(),be(1e5),be(100);function be(e){return Math.floor(Math.random()*(10*e))}function x(e,t,i,n){for(var r=!1,a=0;a<t.length;a++)-1<e.indexOf(t[a])&&(e=e.replace(new RegExp(t[a],"g"),n),r=!0);return r||(e+="&"+i+"="+n),e}function we(e,t,i,n,r,a,o){var s,u=(new Date).getTime();if(e)try{e=x(e,["%InViewPercentage%","{pctview}"],"iv",r.getAverageInViewPercentage()),e=x(e,["%Viewable%","{initview}"],"v",i?"1":"2"),e=x(e,["%Measurable%","{Measurable}"],"im",n?"1":"2"),e=x(e,["%MeasurementType%","{MeasurementType}"],"m",t),e=x(e,["%Timestamp%","{Timestamp}"],"r",u),e=x(e,["%BucketId%","{BucketId}"],"b",F),e=x(e,["%AdditionalData%","{AdditionalData}"],"ad","jv="+W+(o&&""!==o?":"+o:"")+":"+(s="tp="+($?"2":"1"),s+=":mt="+r.measurementBucket)),a&&(e+="&"+a),ee(e)}catch(e){}}function M(e){this.adWidth=e.adWidth,this.adHeight=e.adHeight,this.inViewCallback=e.inViewCallback,this.outOfViewCallback=e.outOfViewCallback,this.thresholdPercentage=e.thresholdPercentage||K,this.inViewPercentage=0,this.inViewPercentages=[],this.maxInViewPercentage=0,this.inView=!1,this.isMeasurable=!0,this.isCurrentlyInView=!1,this.currentTimestamp=0,this.lastTimestamp=0,this.nextTimestamp=0,this.totalInViewTime=0,this.lastTotalInViewTime=0,this.maxInViewTime=0,this.totalInView100Time=0,this.inView100StartTime=0,this.lastInView100Timestamp=0,this.inView100For0Sec=0,this.inView100For1Sec=0,this.stopCallbacks=!1,this.adLoaded=e.adLoaded,this.playerId=e.playerId,this.adUnit=e.adUnit,this.adSizeChanged=e.adSizeChanged,this.adVideoComplete=e.adVideoComplete,this.adIsVideo=!1,this.adVideoIsPlayingInView=!1,this.flashNotSupported=0,this.trackedElement=m}M.prototype.beaconTimeout=1e3,M.prototype.measurementBucket="2",M.prototype.aihv=0,M.prototype.adStackedInView=0,M.prototype.hasCheckedAdStacked=!1,M.prototype.adStuffedInView=0,M.prototype.hasCheckedAdStuffed=!1,M.prototype.init=function(){var e=this;try{V(u,function(){e.currentEntry&&e.inViewListenerCallback({time:(new Date).getTime(),intersectionRatio:e.currentEntry.intersectionRatio})},g)}catch(e){}this.registerInViewListener()},M.prototype.canApplyMethod=function(){return!1},M.prototype.registerInViewListener=function(){},M.prototype.inViewListenerCallback=function(e){this.currentEntry=e,this.currentTimestamp=e.time,this.updateInViewPercentages(e),this.isInView()&&!g[r]?(this.updateTimestamps(),this.isCurrentlyInView,this.isCurrentlyInView=!0,this.stopCallbacks||this.inViewCallback(),this.isInView100()?this.updateTimestamps100():this.resetTimestamps100(),this.aihv=ce(),this.hasCheckedAdStacked&&1!==this.adStackedInView||(this.adStackedInView=function(){var e;try{if(T){if(!E)return 0;e=v.top.document}else e=g;var t=m.getBoundingClientRect(),i=t.width*t.height>=L?30:50,n=T?le(v):{top:t.top,left:t.left};return ue(m,n,t.width,t.height,i,e)?1:0}catch(e){return 0}}(),this.hasCheckedAdStacked=!0),this.hasCheckedAdStuffed&&1!==this.adStuffedInView||(this.adStuffedInView=de(),this.hasCheckedAdStuffed=!0),this.adIsVideo&&(this.aihv=this.adVideoIsPlayingInView?this.aihv:0,this.adStackedInView=this.adStackedInView&&this.adVideoIsPlayingInView?1:0,this.adStuffedInView=this.adStuffedInView&&this.adVideoIsPlayingInView?1:0)):(this.isCurrentlyInView,this.resetTimestamps(),this.resetTimestamps100(),this.isCurrentlyInView=!1,this.inView=!1,this.stopCallbacks||this.outOfViewCallback())},M.prototype.metViewableStandard=function(){this.inView=this.isCurrentlyInView,this.stopCallbacks=!0,this.currentTimestamp=(new Date).getTime(),this.isCurrentlyInView?this.updateTimestamps():this.resetTimestamps(),this.lastTotalInViewTime=this.totalInViewTime},M.prototype.updateInViewPercentages=function(e){this.inViewPercentage=e.intersectionRatio,this.maxInViewPercentage<this.inViewPercentage&&(this.maxInViewPercentage=this.inViewPercentage),this.inViewPercentages.push(this.inViewPercentage)},M.prototype.updateTimestamps=function(){return 0<this.lastTimestamp&&(this.totalInViewTime+=this.currentTimestamp-this.lastTimestamp,this.maxInViewTime<this.totalInViewTime&&(this.maxInViewTime=this.totalInViewTime),this.lastTotalInViewTime=this.totalInViewTime),this.lastTimestamp=this.currentTimestamp,this.lastTimestamp},M.prototype.isInView=function(){return this.inViewPercentage>=this.thresholdPercentage},M.prototype.isSufficientlyInView=function(){return this.totalInViewTime>=this.beaconTimeout},M.prototype.resetTimestamps=function(){this.updateTimestamps(),this.lastTimestamp=this.nextTimestamp=this.totalInViewTime=0,this.inViewPercentages=[]},M.prototype.updateTimestamps100=function(){this.inView100For0Sec=1,0<this.lastInView100Timestamp?this.totalInView100Time+=this.currentTimestamp-this.lastInView100Timestamp:this.inView100StartTime=this.currentTimestamp,this.lastInView100Timestamp=this.currentTimestamp,this.totalInView100Time>this.beaconTimeout&&(this.inView100For1Sec=1)},M.prototype.isInView100=function(){return 99<this.inViewPercentage},M.prototype.resetTimestamps100=function(){this.lastInView100Timestamp=this.totalInView100Time=this.inView100StartTime=0},M.prototype.cleanup=function(){},M.prototype.reset=function(){},M.extend=function(){function t(e){t.parent.call(this,e)}((t.prototype=void 0!==Object.create?Object.create(this.prototype):new this({})).constructor=t).parent=this,t.extend=this.extend;for(var e=0;e<arguments.length;e++){var i,n=arguments[e];for(i in n=void 0!==n.prototype?n.prototype:n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i])}return t},M.prototype.getAverageInViewPercentage=function(){for(var e=this.inViewPercentages.length,t=0,i=0;i<e;i++)t+=this.inViewPercentages[i];return e?Math.round(t/e):0},M.prototype.updateTrackingElement=function(e){this.markAsNotMeasurable()},M.prototype.markAsNotMeasurable=function(){this.isMeasurable=!1,this.cleanup(),this.stopCallbacks||(this.stopCallbacks=!0,this.outOfViewCallback(!0))};var Ae,t=M.extend({fineTimeout:100,coarseTimeout:750,registerInViewListener:function(){var e=this;this.timeout=this.notInViewTimerWrapper(function(){e.fireInViewListenerCallback()})},fireInViewListenerCallback:function(){var e={intersectionRatio:this.getInViewPercentage(),time:(new Date).getTime()},t=this;this.inViewListenerCallback(e),this.timeout=this[this.isCurrentlyInView?"inViewTimerWrapper":"notInViewTimerWrapper"](function(){t.fireInViewListenerCallback()})},getInViewPercentage:function(){return 0},notInViewTimerWrapper:function(e){return setTimeout(e,this.coarseTimeout)},inViewTimerWrapper:function(e){return setTimeout(e,this.fineTimeout)},cleanup:function(){clearTimeout(this.timeout)},measurementBucket:"0"});function Te(e){var t={x:0,y:0};return e.x>=e.scrlX&&e.x+e.halfWidth<e.scrlX+e.viewportWidth?t.x=e.scrlX+e.viewportWidth-e.x:e.x+e.halfWidth>e.scrlX&&e.x+e.adWidth<=e.scrlX+e.viewportWidth?t.x=e.x+e.adWidth-e.scrlX:e.x<e.scrlX&&e.x+e.adWidth>e.scrlX+e.viewportWidth&&e.viewportWidth>=e.halfWidth&&(t.x=e.viewportWidth),e.y>=e.scrlY&&e.y+e.halfHeight<e.scrlY+e.viewportHeight?t.y=e.scrlY+e.viewportHeight-e.y:e.y+e.halfHeight>e.scrlY&&e.y+e.adHeight<=e.scrlY+e.viewportHeight?t.y=e.y+e.adHeight-e.scrlY:e.y<e.scrlY&&e.y+e.adHeight>e.scrlY+e.viewportHeight&&e.viewportHeight>=e.halfHeight&&(t.y=e.viewportHeight),t}function Ee(e){return e.scrlX=0,e.scrlY=0,Te(e)}var I=t.extend({init:function(){1===n||4===n||5===n||7===n?Ae=Te:2!==n&&3!==n&&6!==n||(Ae=Ee),this.registerInViewListener()},getBoundingClientRect:function(){return this.trackedElement.getBoundingClientRect()},getInViewPercentage:function(){try{return e={bcr:this.getBoundingClientRect(),adWidth:p,adHeight:l},t=e.bcr,i=e.adWidth,e=e.adHeight,n=i&&e?i*e:0,r=v.parent,a=r.document,o=a.body,(s={}).x=Math.round(t.left+o.scrollLeft),s.y=Math.round(t.top+o.scrollTop),s.adWidth=i,s.adHeight=e,s.halfWidth=Math.floor(i/2),s.halfHeight=Math.floor(e/2),s.viewportWidth=Math.max(a.documentElement.clientWidth,v.innerWidth||0),s.viewportHeight=Math.max(a.documentElement.clientHeight,v.innerHeight||0),s.scrlX=r.scrollX,s.scrlY=r.scrollY,(t=Ae(s)).x>i&&(t.x=i),t.y>e&&(t.y=e),n?Math.round(100*t.x*t.y/n):0}catch(e){}var e,t,i,n,r,a,o,s;return 0},updateTrackingElement:function(e){this.trackedElement=e}}),i=I.extend({canApplyMethod:function(){return!w&&!T},measurementBucket:"6"}),_e=I.extend({canApplyMethod:function(){return!w&&E&&A},getBoundingClientRect:function(){if(this.trackedElement.ownerDocument!==g)return this.trackedElement.getBoundingClientRect();var e,t=this.trackedElement.getBoundingClientRect(),t={left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width,height:t.height};try{v.frameElement!==this.trackedElement&&(e=v.frameElement.getBoundingClientRect(),t.left+=e.left,t.right+=e.left,t.top+=e.top,t.bottom+=e.top)}catch(e){}return t},measurementBucket:"2"}),Se=t.extend({coarseTimeout:100,canApplyMethod:function(){return!w&&_},getInViewPercentage:function(){return v.$sf.ext[z]()},getGeometrics:function(){return v.$sf.ext.geom()},measurementBucket:"1"});function ke(e){var t,i,n,r,a;for(e.tags=pe(p,l),e.numTag=e.tags.length,e.tagArray=[],t=0;t<e.numTag;t++)e.tagArray.push((n=(i=e).tags[t],a=r=void 0,2===(a=n.split("_")).length&&((r=g.createElement("iframe")).style.cssText="width:"+d+"px;height:"+d+"px;left:"+a[0]+"px;top:"+a[1]+"px;position:absolute;background-color:transparent;",r.scrolling="no",r.allowtransparency="true",r.hidefocus="true",r.setAttribute("frameBorder","0"),r.id=n,i.lastMozPaintCounts[n]=0,i.paintCounts[n]=0,i.paintTimestamps[n]=0,i.lastPaintCounts[n]=0,i.lastPaintTimestamps[n]=0),r));for(t=0;t<e.numTag;t++)g.body.appendChild(e.tagArray[t])}function Ie(r,a){var e,t=v.requestAnimationFrame||v.mozRequestAnimationFrame||s;e=a,(e=g.getElementById(e))&&(e.style.visibility=e.style.visibility===H?B:H),t&&t(function(e){var t,i=r,n=a;if((i.paintTimestamps[n]=e)>i.lastPaintTimestamps[n]&&(e=g.getElementById(n))){try{(t=e.contentWindow).document||(t=s)}catch(e){t=s}t&&t.mozPaintCount>i.lastMozPaintCounts[n]&&(i.paintCounts[n]+=1,i.lastMozPaintCounts[n]=t.mozPaintCount)}})}function Ce(e){for(var t=0;t<e.numTag;t++)Ie(e,e.tags[t])}var Ve=t.extend({canApplyMethod:function(){return!w&&"mozPaintCount"in v},init:function(){this.lastMozPaintCounts={},this.paintCounts={},this.paintTimestamps={},this.lastPaintCounts={},this.lastPaintTimestamps={},ke(this),Ce(this),this.registerInViewListener()},getInViewPercentage:function(){var e=function(e){for(var t,i=0,n=0;n<e.numTag;n++)t=e.tags[n],e.paintTimestamps[t]>e.lastPaintTimestamps[t]&&(e.paintCounts[t]>e.lastPaintCounts[t]&&(i+=1),e.lastPaintCounts[t]=e.paintCounts[t],e.lastPaintTimestamps[t]=e.paintTimestamps[t]);return i}(this);return Ce(this),this.numTag?100*e/this.numTag:0},notInViewTimerWrapper:function(e){var t=this;return setTimeout(function(){Ce(t),t.timeout=setTimeout(e,.5*t.coarseTimeout)},.5*this.coarseTimeout)},inViewTimerWrapper:function(e){var t=this;return setTimeout(function(){Ce(t),t.timeout=setTimeout(e,.5*t.fineTimeout)},.5*this.fineTimeout)},removeTags:function(){for(var e=0;e<this.numTag;e++)g.body.removeChild(this.tagArray[e])},cleanup:function(){this.constructor.parent.prototype.cleanup.call(this),this.removeTags()},reset:function(){this.removeTags(),ke(this)},measurementBucket:"3"}),Pe=M.extend({canApplyMethod:function(){return!w&&(E&&!!v.top.IntersectionObserver||!E&&!!v.IntersectionObserver)&&!_},registerInViewListener:function(){for(var n=this,e=[],t=this.thresholdPercentage/100;t<1;t+=.05)e.push(t);e.push(1);var i=v.IntersectionObserver;E&&(i=v.top.IntersectionObserver),this.io=new i(function(e){for(var t,i=0;i<e.length;i++)if(e[i].target===n.trackedElement){t=e[i];break}t&&n.inViewListenerCallback({intersectionRatio:100*e[0].intersectionRatio,time:(new Date).getTime()})},{threshold:e}),this.io.observe(this.trackedElement)},cleanup:function(){this.io&&this.io.disconnect()},updateTrackingElement:function(e){this.io.unobserve(this.trackedElement),this.io.observe(e),this.trackedElement=e},measurementBucket:"7"}),Oe=M.extend({canApplyMethod:function(){return w&&void 0!==v.mraid},registerInViewListener:function(){var t=this;t.mraidVersion=v.mraid.getVersion&&v.mraid.getVersion(),"3.0"===t.mraidVersion?(this.viewableChangeEventListener=function(e){t.inViewListenerCallback({time:(new Date).getTime(),intersectionRatio:e})},v.mraid.addEventListener("exposureChange",this.viewableChangeEventListener)):(this.viewableChangeEventListener=function(){t.inViewListenerCallback({time:(new Date).getTime(),intersectionRatio:v.mraid.isViewable()?100:0})},v.mraid.addEventListener("viewableChange",this.viewableChangeEventListener))},cleanup:function(){"3.0"===this.mraidVersion?v.mraid.removeEventListener("exposureChange",this.viewableChangeEventListener):v.mraid.removeEventListener("viewableChange",this.viewableChangeEventListener)},measurementBucket:"8"}),xe=M.extend({canApplyMethod:function(){return!w&&!_&&void 0!==v.context&&void 0!==v.context.observeIntersection},registerInViewListener:function(){var t=this;t.cleanup=v.context.observeIntersection(function(e){e.sort(function(e,t){return e.time>t.time}).forEach(function(e){t.inViewListenerCallback({time:e.time,intersectionRatio:100*e.intersectionRatio})})})},measurementBucket:"9"});function Me(e){var t,i,n,r,a;for(e.tags=pe(p,l),e.numTag=e.tags.length,e.tagArray=[],t=0;t<e.numTag;t++)e.tagArray.push((n=(i=e).tags[t],a=r=void 0,2===(a=n.split("_")).length&&((r=g.createElement("iframe")).style.cssText="width:"+d+"px;height:"+d+"px;left:"+a[0]+"px;top:"+a[1]+"px;position:absolute;background-color:transparent;",r.scrolling="no",r.allowtransparency="true",r.hidefocus="true",r.setAttribute("frameBorder","0"),r.id=n,i.painted[n]=0),r));for(t=0;t<e.numTag;t++)g.body.appendChild(e.tagArray[t])}var t=t.extend({canApplyMethod:function(){return!w&&"requestAnimationFrame"in v&&"cancelAnimationFrame"in v&&"safari"===te&&10<=Number(ie)},setupHandlerPerTag:function(t){var i=this.tagArray[t].contentWindow,n=this;i&&(i.prevTimestamp=(new Date).getTime(),i.animationFrameRequest&&(i.cancelAnimationFrame(i.animationFrameRequest),this.painted[t]=0),i.animationFrameRequest=i.requestAnimationFrame(function(){var e=(new Date).getTime();e-i.prevTimestamp<n.fineTimeout/2?n.painted[t]=1:n.painted[t]=0,i.prevTimestamp=e}))},setupHandlers:function(){for(var e=0;e<this.numTag;e++)this.setupHandlerPerTag(e)},init:function(){this.painted={},Me(this),this.setupHandlers(),this.registerInViewListener()},getInViewPercentage:function(){for(var e=0,t=0;t<this.numTag;t++)e+=this.painted[t],this.painted[t]=0;return this.setupHandlers(),this.numTag?100*e/this.numTag:0},notInViewTimerWrapper:function(e){var t=this;return setTimeout(function(){t.setupHandlers(),t.timeout=setTimeout(e,.5*t.coarseTimeout)},.5*this.coarseTimeout)},inViewTimerWrapper:function(e){var t=this;return setTimeout(function(){t.setupHandlers(),t.timeout=setTimeout(e,.5*t.fineTimeout)},.5*this.fineTimeout)},removeTags:function(){for(var e=0;e<this.numTag;e++)g.body.removeChild(this.tagArray[e])},cleanup:function(){this.constructor.parent.prototype.cleanup.call(this),this.removeTags()},reset:function(){this.removeTags(),Me(this)},measurementBucket:"10"}),De=M.extend({canApplyMethod:function(){return!0},init:function(){this.isMeasurable=!1;var e=this;setTimeout(function(){e.outOfViewCallback(!0)})},measurementBucket:"5"}),Re=M.extend({init:function(){this.adClicked=!1,this.adErrored=!1,this.minVolume=999,this.timeAtMinVolume=0,this.maxTimeAtMinVolume=0,this.currentlyAtMinVolume=!1,this.maxVolume=0,this.timeAtMaxVolume=0,this.maxTimeAtMaxVolume=0,this.currentlyAtMaxVolume=!1,this.playerWidth=0,this.playerHeight=0,this.playerSizeIsValid=!1,this.adHasLoaded=!1,this.adHasStarted=!1,this.adImpressionFired=!1,this.adVideoCompleteFired=!1,this.adUserCloseFired=!1,this.adSkippedFired=!1,this.adStoppedFired=!1,this.adIsPlaying=!1,this.adUnit&&this.subscribeToEvents()},subscribeToEvents:function(){this.adUnit.subscribe(this.adLoadedWrapper,"AdLoaded",this,this.playerId),this.adUnit.subscribe(this.adStartedPlaying,"AdStarted",this,this.playerId),this.adUnit.subscribe(this.adStartedPlaying,"AdVideoStart",this,this.playerId),this.adUnit.subscribe(this.adImpressionHandler,"AdImpression",this,this.playerId),this.adUnit.subscribe(this.adStartedPlaying,"AdPlaying",this,this.playerId),this.adUnit.subscribe(this.adStoppedPlaying,"AdPaused",this,this.playerId),this.adUnit.subscribe(this.adStoppedHandler,"AdStopped",this,this.playerId),this.adUnit.subscribe(this.adVideoCompleteHandler,"AdVideoComplete",this,this.playerId),this.adUnit.subscribe(this.adUserCloseHandler,"AdUserClose",this,this.playerId),this.adUnit.subscribe(this.adSkippedHandler,"AdSkipped",this,this.playerId),this.adUnit.subscribe(this.playerError,"AdError",this,this.playerId),this.adUnit.subscribe(this.adClickedHandler,"AdClickThru",this,this.playerId),this.adUnit.subscribe(this.adSizeChangeHandler,"AdSizeChange",this,this.playerId),this.adUnit.subscribe(this.adExpandedChangeHandler,"AdExpandedChange",this,this.playerId),this.adUnit.subscribe(this.adVolumeChangeHandler,"AdVolumeChange",this,this.playerId)},unsubscribeToEvents:function(){this.adUnit.unsubscribe(this.adLoadedWrapper,"AdLoaded",this.playerId),this.adUnit.unsubscribe(this.adStartedPlaying,"AdStarted",this.playerId),this.adUnit.unsubscribe(this.adStartedPlaying,"AdVideoStart",this.playerId),this.adUnit.unsubscribe(this.adImpressionHandler,"AdImpression",this.playerId),this.adUnit.unsubscribe(this.adStartedPlaying,"AdPlaying",this.playerId),this.adUnit.unsubscribe(this.adStoppedPlaying,"AdPaused",this.playerId),this.adUnit.unsubscribe(this.adStoppedHandler,"AdStopped",this.playerId),this.adUnit.unsubscribe(this.adVideoCompleteHandler,"AdVideoComplete",this.playerId),this.adUnit.unsubscribe(this.adUserCloseHandler,"AdUserClose",this.playerId),this.adUnit.unsubscribe(this.adSkippedHandler,"AdSkipped",this.playerId),this.adUnit.unsubscribe(this.playerError,"AdError",this.playerId),this.adUnit.unsubscribe(this.adClickedHandler,"AdClickThru",this.playerId),this.adUnit.unsubscribe(this.adSizeChangeHandler,"AdSizeChange",this.playerId),this.adUnit.unsubscribe(this.adExpandedChangeHandler,"AdExpandedChange",this.playerId),this.adUnit.unsubscribe(this.adVolumeChangeHandler,"AdVolumeChange",this.playerId)},updateTimestamps:function(){var e;this.currentTimestamp=(new Date).getTime(),0<this.lastTimestamp&&(e=this.currentTimestamp-this.lastTimestamp,this.adUnit&&this.adUnit.getAdVolume&&(this.currentlyAtMinVolume&&(this.timeAtMinVolume+=e,this.timeAtMinVolume>this.maxTimeAtMinVolume&&(this.maxTimeAtMinVolume=this.timeAtMinVolume)),this.currentlyAtMaxVolume&&(this.timeAtMaxVolume+=e,this.timeAtMaxVolume>this.maxTimeAtMaxVolume&&(this.maxTimeAtMaxVolume=this.timeAtMaxVolume)))),this.constructor.parent.prototype.updateTimestamps.call(this)},resetVolumeTimestamps:function(){this.timeAtMinVolume=this.timeAtMaxVolume=0},resetTimestamps:function(){this.resetVolumeTimestamps(),this.constructor.parent.prototype.resetTimestamps.call(this)},updateAdVolume:function(){var e;this.adUnit&&this.adUnit.getAdVolume&&((e=this.adUnit.getAdVolume())<this.minVolume?(this.minVolume=e,this.resetVolumeTimestamps(),this.currentlyAtMinVolume=!0):e!==this.minVolume&&(this.currentlyAtMinVolume=!1),e>this.maxVolume?(this.maxVolume=e,this.resetVolumeTimestamps(),this.currentlyAtMaxVolume=!0):e!==this.maxVolume&&(this.currentlyAtMaxVolume=!1))},adLoadedWrapper:function(){this.adHasLoaded=!0,this.updatePlayerSize(),this.adLoaded()},adStartedPlaying:function(){this.adHasStarted=!0,this.adIsPlaying=!0,this.updateAdVolume(),this.updateTimestamps(),this.adSizeChangeHandler(),this.isCurrentlyInView=!0,this.stopCallbacks||this.inViewCallback()},adImpressionHandler:function(){this.adImpressionFired=!0},adStoppedPlaying:function(e){this.currentTimestamp=(new Date).getTime(),this.resetTimestamps(),this.isCurrentlyInView=!1,this.adIsPlaying=!1,this.stopCallbacks&&!e||this.outOfViewCallback(e)},endAd:function(){this.adStoppedPlaying(!0),this.unsubscribeToEvents()},adStoppedHandler:function(){this.adStoppedFired=!0,this.endAd()},adVideoCompleteHandler:function(){this.updateAdVolume(),this.adVideoCompleteFired=!0,this.adVideoComplete(),this.endAd()},adUserCloseHandler:function(){this.adUserCloseFired=!0,this.endAd()},adSkippedHandler:function(){this.adSkippedFired=!0,this.endAd()},playerError:function(){this.updateTimestamps(),this.isMeasurable=this.adImpressionFired,this.isCurrentlyInView=!1,this.inView=!1,this.stopCallbacks=!0,this.adErrored=!0,this.outOfViewCallback(!0),this.unsubscribeToEvents()},adClickedHandler:function(){this.updateTimestamps(),this.adClicked=!0,this.stopCallbacks||this.inViewCallback(!0),this.stopCallbacks=!0,this.unsubscribeToEvents()},updatePlayerSize:function(){var e=oe(a);this.playerWidth=e.width,this.playerHeight=e.height,this.playerSizeIsValid=e.valid},adSizeChangeHandler:function(){this.updateTimestamps(),k(this.adUnit.adWidth,this.adUnit.adHeight),this.updatePlayerSize(),this.stopCallbacks||this.adSizeChanged()},adExpandedChangeHandler:function(){this.updateTimestamps(),k(this.adUnit.adWidth,this.adUnit.adHeight),this.stopCallbacks||this.adSizeChanged()},adVolumeChangeHandler:function(){this.updateAdVolume(),this.updateTimestamps()},metViewableStandard:function(){this.constructor.parent.prototype.metViewableStandard.call(this),this.isMeasurable=this.adHasLoaded&&this.adHasStarted&&this.adImpressionFired&&this.isMeasurable,this.inView=this.isMeasurable&&this.inView},cleanup:function(){this.unsubscribeToEvents()},getVideoEventBits:function(){return(this.adHasLoaded<<0)+(this.adHasStarted<<1)+(this.adImpressionFired<<2)+(this.adVideoCompleteFired<<3)+(this.adUserCloseFired<<4)+(this.adSkippedFired<<5)+(this.adStoppedFired<<6)}});function Ue(e,t){this.timeout=e,this.callback=t,this.timeoutRef=0}Ue.prototype.startTimer=function(e){var t=this;e?this.callback(e):this.timeoutRef||(this.timeoutRef=setTimeout(function(){t.callback(e)},this.timeout))};var D,R,Ne,je=[Oe,Pe,xe,i,_e,Se,Ve,t,De],Le="",He=!(Ue.prototype.stopTimer=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=0,e&&this.callback(e)}),Be=!1,Fe="2",We=!1,ze=!1,Ge=!1;function qe(e){Be||(R.metViewableStandard(),D.metViewableStandard(),we(Le,"2",R.inView&&D.inView,R.isMeasurable&&D.isMeasurable,D,"plw="+R.playerWidth+"&plh="+R.playerHeight,"vd=1:vv="+Fe+":vpov="+(Ge?1:0)+":fu="+(e?"1":"0"))),Be=!0}function Xe(){qe(!0),R.cleanup(),D.cleanup()}function Ye(){Xe(),P(G,Je),P(q,Qe)}function Je(){Xe(),P(G,Je)}function Qe(){Xe(),P(q,Qe)}function $e(e){ze=!1,e?Ye():R.isCurrentlyInView&&D.isCurrentlyInView&&Ne.startTimer(),D.adVideoIsPlayingInView=R.adHasStarted&&R.adIsPlaying}function Ke(e){Ne.stopTimer(),ze=!0;var t=R.adHasStarted&&R.adIsPlaying;R.adVideoCompleteFired||(Ge=ze&&t),e&&Ye()}j.default=function(e){if(e&&(Le=e.adParams&&e.adParams.viewabilityBeaconUrl)&&""!==Le){var t;if(e.vpaidVersion&&(Fe=e.vpaidVersion),e.videoSlot&&!S(e.videoSlot,h,f)?We=fe(e.videoSlot,e.videoSlot):e.slot&&(We=fe(e.slot)),k(e.adWidth,e.adHeight),Ne=new Ue(2e3,qe),We){for(var i=0;i<je.length&&!je[i].prototype.canApplyMethod(e.adParams);i++);t=je[i]}else t=De;(D=new t({adWidth:p,adHeight:l,inViewCallback:$e,outOfViewCallback:Ke})).adIsVideo=!0,(R=new Re({adUnit:e.vpaidJSWrapper,playerId:e.adParams.playerId,inViewCallback:$e,outOfViewCallback:Ke,adLoaded:function(){D.init(),He=!0},adSizeChanged:function(){He&&D.reset()},adVideoComplete:function(){R.isCurrentlyInView&&D.isCurrentlyInView&&(0<R.minVolume&&999!==R.minVolume?O.avoc=1:999===R.minVolume&&(O.avoc=-1)),R.adUnit&&R.adUnit.getAdVolume?O.avoc_debug=0<R.adUnit.getAdVolume()?"1":"2":O.avoc_debug="0"}})).init(),V("load",function(){try{y.permissions.query({name:"notifications"}).then(function(e){})}catch(e){}try{y.mediaDevices&&y.mediaDevices.enumerateDevices&&"bound reportBlock"!==y.mediaDevices.enumerateDevices.name&&y.mediaDevices.enumerateDevices().then(function(e){})}catch(e){}}),V("resize",function(){k(),He&&D.reset()}),V(G,Je),V(q,Qe),ye()}}},{}],2:[function(e,t,i){"use strict";t.exports=function(r,e,t,i){function n(n){return function(){var e,t=-1;if("number"==typeof(e=r&&r.getAdVolume?r.getAdVolume():e)&&!isNaN(e)&&0<=e&&(t=e),u.addEvent({type:n,adVolume:t}),-1!==h.indexOf(n)&&r&&r.unsubscribe&&!c)for(var i in c=!0,d)if(d.hasOwnProperty&&d.hasOwnProperty(i))try{r.unsubscribe(d[i],i)}catch(e){}}}var a,o,s=document.createElement("script"),u={events:[],addEvent:function(e){l.sendEvent?(u.events&&(l.sendEvent(u.events),u.events=!1),l.sendEvent(e)):u.events.push(e)}},l={adData:{ids:t,vpaid:r,build:"cc07a80-clean"},dispatchEvent:u.addEvent},d=(t="_moatApi"+Math.floor(1e8*Math.random()),{AdStarted:n("AdStarted"),AdStopped:n("AdStopped"),AdSkipped:n("AdSkipped"),AdLoaded:n("AdLoaded"),AdLinearChange:n("AdLinearChange"),AdSizeChange:n("AdSizeChange"),AdExpandedChange:n("AdExpandedChange"),AdSkippableStateChange:n("AdSkippableStateChange"),AdDurationChange:n("AdDurationChange"),AdRemainingTimeChange:n("AdRemainingTimeChange"),AdVolumeChange:n("AdVolumeChange"),AdImpression:n("AdImpression"),AdClickThru:n("AdClickThru"),AdInteraction:n("AdInteraction"),AdVideoStart:n("AdVideoStart"),AdVideoFirstQuartile:n("AdVideoFirstQuartile"),AdVideoMidpoint:n("AdVideoMidpoint"),AdVideoThirdQuartile:n("AdVideoThirdQuartile"),AdVideoComplete:n("AdVideoComplete"),AdUserAcceptInvitation:n("AdUserAcceptInvitation"),AdUserMinimize:n("AdUserMinimize"),AdUserClose:n("AdUserClose"),AdPaused:n("AdPaused"),AdPlaying:n("AdPlaying"),AdError:n("AdError")}),c=!1,h=["AdStopped","AdSkipped","AdVideoComplete"];if(r&&r.subscribe)for(var f in d)d.hasOwnProperty&&d.hasOwnProperty(f)&&r.subscribe(d[f],f);try{o=(a=e.ownerDocument).defaultView||a.parentWindow}catch(e){a=document,o=window}return o[t]=l,s.type="text/javascript",e&&e.insertBefore(s,e.childNodes[0]||null),s.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t,l}},{}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;i.default="2.1.64"},{}],4:[function(e,B,t){!function(j,L,H){!function(){!function(){var e,v={};function g(){}function r(e){return e}function t(e){return!!e}function i(e){return!e}var n="object"==typeof self&&self.self===self&&self||"object"==typeof L&&L.global===L&&L||this;function d(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function y(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}null!=n&&(e=n.async),v.noConflict=function(){return n.async=e,v};var U=Object.prototype.toString,b=Array.isArray||function(e){return"[object Array]"===U.call(e)};function o(e){return b(e)||"number"==typeof e.length&&0<=e.length&&e.length%1==0}function w(e,t){for(var i=-1,n=e.length;++i<n;)t(e[i],i,e)}function s(e,t){for(var i=-1,n=e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e);return r}function a(e){return s(Array(e),function(e,t){return t})}function A(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}var T=Object.keys||function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(t);return i};function c(e){var t,i,n=-1;return o(e)?(t=e.length,function(){return++n<t?n:null}):(i=T(e),t=i.length,function(){return++n<t?i[n]:null})}function E(n,r){return r=null==r?n.length-1:+r,function(){for(var e=Math.max(arguments.length-r,0),t=Array(e),i=0;i<e;i++)t[i]=arguments[i+r];switch(r){case 0:return n.call(this,t);case 1:return n.call(this,arguments[0],t)}}}function u(n){return function(e,t,i){return n(e,i)}}var l="function"==typeof H&&H,h=l?function(e){l(e)}:function(e){setTimeout(e,0)};function f(l){return function(i,n,r){r=y(r||g);var a=c(i=i||[]);if(l<=0)return r(null);var o=!1,s=0,u=!1;!function t(){if(o&&s<=0)return r(null);for(;s<l&&!u;){var e=a();if(null===e)return o=!0,void(s<=0&&r(null));s+=1,n(i[e],e,d(function(e){--s,e?(r(e),u=!0):t()}))}}()}}function p(n){return function(e,t,i){return n(v.eachOf,e,t,i)}}function m(r){return function(e,t,i,n){return r(f(t),e,i,n)}}function _(n){return function(e,t,i){return n(v.eachOfSeries,e,t,i)}}function S(e,t,r,i){i=y(i||g);var a=o(t=t||[])?[]:{};e(t,function(e,i,n){r(e,function(e,t){a[i]=t,n(e)})},function(e){i(e,a)})}function k(e,t,r,i){var a=[];e(t,function(t,i,n){r(t,function(e){e&&a.push({index:i,value:t}),n()})},function(){i(s(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}function I(e,t,i,n){k(e,t,function(e,t){i(e,function(e){t(!e)})},n)}function C(o,s,u){return function(e,t,n,r){function i(){r&&r(u(!1,void 0))}function a(t,e,i){if(!r)return i();n(t,function(e){r&&s(e)&&(r(u(!0,t)),r=n=!1),i()})}3<arguments.length?o(e,t,a,i):(r=n,n=t,o(e,a,i))}}function V(e,t){return t}function P(e,t,i){i=i||g;var r=o(t)?[]:{};e(t,function(e,i,n){e(E(function(e,t){t.length<=1&&(t=t[0]),r[i]=t,n(e)}))},function(e){i(e,r)})}function O(e,t,n,i){var r=[];e(t,function(e,t,i){n(e,function(e,t){r=r.concat(t||[]),i(e)})},function(e){i(e,r)})}function x(i,e,t){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");function n(t,e,i,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(t.started=!0,0===(e=b(e)?e:[e]).length&&t.idle())return v.setImmediate(function(){t.drain()});w(e,function(e){e={data:e,callback:n||g};i?t.tasks.unshift(e):t.tasks.push(e),t.tasks.length===t.concurrency&&t.saturated()}),v.setImmediate(t.process)}var r=0,a=[],o={tasks:[],concurrency:e,payload:t,saturated:g,empty:g,drain:g,started:!1,paused:!1,push:function(e,t){n(o,e,!1,t)},kill:function(){o.drain=g,o.tasks=[]},unshift:function(e,t){n(o,e,!0,t)},process:function(){for(;!o.paused&&r<o.concurrency&&o.tasks.length;){var e=o.payload?o.tasks.splice(0,o.payload):o.tasks.splice(0,o.tasks.length),t=s(e,function(e){return e.data}),e=(0===o.tasks.length&&o.empty(),r+=1,a.push(e[0]),d(function(t,i){return function(){--r;var n=!1,e=arguments;w(i,function(i){w(a,function(e,t){e!==i||n||(a.splice(t,1),n=!0)}),i.callback.apply(i,e)}),t.tasks.length+r===0&&t.drain(),t.process()}}(o,e)));i(t,e)}},length:function(){return o.tasks.length},running:function(){return r},workersList:function(){return a},idle:function(){return o.tasks.length+r===0},pause:function(){o.paused=!0},resume:function(){if(!1!==o.paused){o.paused=!1;for(var e=Math.min(o.concurrency,o.tasks.length),t=1;t<=e;t++)v.setImmediate(o.process)}}};return o}function M(i){return E(function(e,t){e.apply(null,t.concat([E(function(e,t){"object"!=typeof console||e||console[i]&&w(t,function(e){})})]))})}function D(n){return function(e,t,i){n(a(e),t,i)}}function N(a){return E(function(t,e){var i=E(function(n){var r=this,e=n.pop();return a(t,function(e,t,i){e.apply(r,n.concat([i]))},e)});return e.length?i.apply(this,e):i})}function R(n){return E(function(e){var t=e.pop(),i=(e.push(function(){var e=arguments;i?v.setImmediate(function(){t.apply(null,e)}):t.apply(null,e)}),!0);n.apply(this,e),i=!1})}"object"==typeof j&&"function"==typeof j.nextTick?v.nextTick=j.nextTick:v.nextTick=h,v.setImmediate=l?h:v.nextTick,v.forEach=v.each=function(e,t,i){return v.eachOf(e,u(t),i)},v.forEachSeries=v.eachSeries=function(e,t,i){return v.eachOfSeries(e,u(t),i)},v.forEachLimit=v.eachLimit=function(e,t,i,n){return f(t)(e,u(i),n)},v.forEachOf=v.eachOf=function(e,t,i){i=y(i||g);for(var n,r=c(e=e||[]),a=0;null!=(n=r());)a+=1,t(e[n],n,d(o));function o(e){a--,e?i(e):null===n&&a<=0&&i(null)}0===a&&i(null)},v.forEachOfSeries=v.eachOfSeries=function(e,n,r){r=y(r||g);var a=c(e=e||[]),o=a();!function t(){var i=!0;if(null===o)return r(null);n(e[o],o,d(function(e){if(e)r(e);else{if(null===(o=a()))return r(null);i?v.setImmediate(t):t()}})),i=!1}()},v.forEachOfLimit=v.eachOfLimit=function(e,t,i,n){f(t)(e,i,n)},v.map=p(S),v.mapSeries=_(S),v.mapLimit=m(S),v.inject=v.foldl=v.reduce=function(e,n,r,t){v.eachOfSeries(e,function(e,t,i){r(n,e,function(e,t){n=t,i(e)})},function(e){t(e,n)})},v.foldr=v.reduceRight=function(e,t,i,n){e=s(e,r).reverse();v.reduce(e,t,i,n)},v.transform=function(e,n,r,t){3===arguments.length&&(t=r,r=n,n=b(e)?[]:{}),v.eachOf(e,function(e,t,i){r(n,e,t,i)},function(e){t(e,n)})},v.select=v.filter=p(k),v.selectLimit=v.filterLimit=m(k),v.selectSeries=v.filterSeries=_(k),v.reject=p(I),v.rejectLimit=m(I),v.rejectSeries=_(I),v.any=v.some=C(v.eachOf,t,r),v.someLimit=C(v.eachOfLimit,t,r),v.all=v.every=C(v.eachOf,i,i),v.everyLimit=C(v.eachOfLimit,i,i),v.detect=C(v.eachOf,r,V),v.detectSeries=C(v.eachOfSeries,r,V),v.detectLimit=C(v.eachOfLimit,r,V),v.sortBy=function(e,t,i){function n(e,t){e=e.criteria,t=t.criteria;return e<t?-1:t<e?1:0}v.map(e,function(i,n){t(i,function(e,t){e?n(e):n(null,{value:i,criteria:t})})},function(e,t){if(e)return i(e);i(null,s(t.sort(n),function(e){return e.value}))})},v.auto=function(s,u,l){"function"==typeof arguments[1]&&(l=u,u=null),l=y(l||g);var e=T(s),t=e.length;if(!t)return l(null);u=u||t;var d={},c=0,h=!1,i=[];function f(e){i.unshift(e)}function p(e){e=A(i,e);0<=e&&i.splice(e,1)}function m(){t--,w(i.slice(0),function(e){e()})}f(function(){t||l(null,d)}),w(e,function(a){if(!h){for(var e,t=b(s[a])?s[a]:[s[a]],i=E(function(e,t){var i,n,r;c--,t.length<=1&&(t=t[0]),e?(i={},r=function(e,t){i[t]=e},w(T(n=d),function(e){r(n[e],e)}),i[a]=t,h=!0,l(e,i)):(d[a]=t,v.setImmediate(m))}),o=t.slice(0,t.length-1),n=o.length;n--;){if(!(e=s[o[n]]))throw new Error("Has nonexistent dependency in "+o.join(", "));if(b(e)&&0<=A(e,a))throw new Error("Has cyclic dependencies")}r()?(c++,t[t.length-1](i,d)):f(function e(){r()&&(c++,p(e),t[t.length-1](i,d))})}function r(){return c<u&&(n=function(e,t){return e&&d.hasOwnProperty(t)},r=!0,w(o,function(e,t,i){r=n(r,e,t,i)}),r)&&!d.hasOwnProperty(a);var n,r}})},v.retry=function(e,t,i){var n=[],r={times:5,interval:0};var a=arguments.length;if(a<1||3<a)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");if(a<=2&&"function"==typeof e&&(i=t,t=e),"function"!=typeof e){var a=r,o=e;if("number"==typeof o)a.times=parseInt(o,10)||5;else{if("object"!=typeof o)throw new Error("Unsupported argument type for 'times': "+typeof o);a.times=parseInt(o.times,10)||5,a.interval=parseInt(o.interval,10)||0}}function s(i,t){for(;r.times;){var e=!--r.times;n.push(function(e,n){return function(i){e(function(e,t){i(!e||n,{err:e,result:t})},t)}}(r.task,e)),!e&&0<r.interval&&n.push(function(t){return function(e){setTimeout(function(){e(null)},t)}}(r.interval))}v.series(n,function(e,t){t=t[t.length-1],(i||r.callback)(t.err,t.result)})}return r.callback=i,r.task=t,r.callback?s():s},v.waterfall=function(e,r){return r=y(r||g),b(e)?e.length?void function i(n){return E(function(e,t){e?r.apply(null,[e].concat(t)):((e=n.next())?t.push(i(e)):t.push(r),R(n).apply(null,t))})}(v.iterator(e))():r():(e=new Error("First argument to waterfall must be an array of functions"),r(e))},v.parallel=function(e,t){P(v.eachOf,e,t)},v.parallelLimit=function(e,t,i){P(f(t),e,i)},v.series=function(e,t){P(v.eachOfSeries,e,t)},v.iterator=function(n){return function e(t){function i(){return n.length&&n[t].apply(null,arguments),i.next()}return i.next=function(){return t<n.length-1?e(t+1):null},i}(0)},v.apply=E(function(t,i){return E(function(e){return t.apply(null,i.concat(e))})}),v.concat=p(O),v.concatSeries=_(O),v.whilst=function(i,n,r){var a;r=r||g,i()?(a=E(function(e,t){e?r(e):i.apply(this,t)?n(a):r.apply(null,[null].concat(t))}),n(a)):r(null)},v.doWhilst=function(e,t,i){var n=0;return v.whilst(function(){return++n<=1||t.apply(this,arguments)},e,i)},v.until=function(e,t,i){return v.whilst(function(){return!e.apply(this,arguments)},t,i)},v.doUntil=function(e,t,i){return v.doWhilst(e,function(){return!t.apply(this,arguments)},i)},v.during=function(i,n,r){r=r||g;var a=E(function(e,t){e?r(e):(t.push(o),i.apply(this,t))}),o=function(e,t){e?r(e):t?n(a):r(null)};i(o)},v.doDuring=function(e,t,i){var n=0;v.during(function(e){n++<1?e(null,!0):t.apply(this,arguments)},e,i)},v.queue=function(i,e){return x(function(e,t){i(e[0],t)},e,1)},v.priorityQueue=function(e,t){function r(e,t){return e.priority-t.priority}function n(t,e,i,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(t.started=!0,0===(e=b(e)?e:[e]).length)return v.setImmediate(function(){t.drain()});w(e,function(e){e={data:e,priority:i,callback:"function"==typeof n?n:g};t.tasks.splice(function(e,t,i){for(var n=-1,r=e.length-1;n<r;){var a=n+(r-n+1>>>1);0<=i(t,e[a])?n=a:r=a-1}return n}(t.tasks,e,r)+1,0,e),t.tasks.length===t.concurrency&&t.saturated(),v.setImmediate(t.process)})}var a=v.queue(e,t);return a.push=function(e,t,i){n(a,e,t,i)},delete a.unshift,a},v.cargo=function(e,t){return x(e,1,t)},v.log=M("log"),v.dir=M("dir"),v.memoize=function(i,n){var a={},o={},s=Object.prototype.hasOwnProperty,e=(n=n||r,E(function(e){var t=e.pop(),r=n.apply(null,e);s.call(a,r)?v.setImmediate(function(){t.apply(null,a[r])}):s.call(o,r)?o[r].push(t):(o[r]=[t],i.apply(null,e.concat([E(function(e){a[r]=e;var t=o[r];delete o[r];for(var i=0,n=t.length;i<n;i++)t[i].apply(null,e)})])))}));return e.memo=a,e.unmemoized=i,e},v.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},v.times=D(v.map),v.timesSeries=D(v.mapSeries),v.timesLimit=function(e,t,i,n){return v.mapLimit(a(e),t,i,n)},v.seq=function(){var t=arguments;return E(function(e){var n=this,i=e[e.length-1];"function"==typeof i?e.pop():i=g,v.reduce(t,e,function(e,t,i){t.apply(n,e.concat([E(function(e,t){i(e,t)})]))},function(e,t){i.apply(n,[e].concat(t))})})},v.compose=function(){return v.seq.apply(null,Array.prototype.reverse.call(arguments))},v.applyEach=N(v.eachOf),v.applyEachSeries=N(v.eachOfSeries),v.forever=function(e,t){var i=d(t||g),n=R(e);!function e(t){if(t)return i(t);n(e)}()},v.ensureAsync=R,v.constant=E(function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}}),v.wrapSync=v.asyncify=function(r){return E(function(e){var t,i,n=e.pop();try{t=r.apply(this,e)}catch(e){return n(e)}("function"==(i=typeof(e=t))||"object"==i&&e)&&"function"==typeof t.then?t.then(function(e){n(null,e)}).catch(function(e){n(e.message?e:new Error(e))}):n(null,t)})},"object"==typeof B&&B.exports?B.exports=v:n.async=v}()}.call(this)}.call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{_process:5,timers:6}],5:[function(e,t,i){var n,r,t=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return(n=setTimeout)(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}var u,l=[],d=!1,c=-1;function h(){d&&u&&(d=!1,u.length?l=u.concat(l):c=-1,l.length&&f())}function f(){if(!d){for(var e=s(h),t=(d=!0,l.length);t;){for(u=l,l=[];++c<t;)u&&u[c].run();c=-1,t=l.length}u=null,d=!1,!function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return(r=clearTimeout)(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new p(e,t)),1!==l.length||d||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],6:[function(u,e,l){!function(i,s){!function(){var n=u("process/browser.js").nextTick,e=Function.prototype.apply,r=Array.prototype.slice,a={},o=0;function t(e,t){this._id=e,this._clearFn=t}l.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},l.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},l.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},l.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},l._unrefActive=l.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},l.setImmediate="function"==typeof i?i:function(e){var t=o++,i=!(arguments.length<2)&&r.call(arguments,1);return a[t]=!0,n(function(){a[t]&&(i?e.apply(null,i):e.call(null),l.clearImmediate(t))}),t},l.clearImmediate="function"==typeof s?s:function(e){delete a[e]}}.call(this)}.call(this,u("timers").setImmediate,u("timers").clearImmediate)},{"process/browser.js":5,timers:6}],7:[function(e,z,G){!function(r,c){"use strict";function e(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t}function U(e,t){return typeof e===d&&-1!==D(t).indexOf(D(e))}function a(e,t){if(typeof e===d)return e=e.replace(/^\s\s*/,u).replace(/\s\s*$/,u),typeof t==l?e:e.substring(0,255)}function o(e,t){for(var i,n,r,a,o,s=0;s<t.length&&!a;){for(var u=t[s],l=t[s+1],d=i=0;d<u.length&&!a;)if(a=u[d++].exec(e))for(n=0;n<l.length;n++)o=a[++i],typeof(r=l[n])===f&&0<r.length?2===r.length?typeof r[1]==h?this[r[0]]=r[1].call(this,o):this[r[0]]=r[1]:3===r.length?typeof r[1]!==h||r[1].exec&&r[1].test?this[r[0]]=o?o.replace(r[1],r[2]):c:this[r[0]]=o?r[1].call(this,o,r[2]):c:4===r.length&&(this[r[0]]=o?r[3].call(this,o.replace(r[1],r[2])):c):this[r]=o||c;s+=2}}function t(e,t){for(var i in t)if(typeof t[i]===f&&0<t[i].length){for(var n=0;n<t[i].length;n++)if(U(t[i][n],e))return"?"===i?c:i}else if(U(t[i],e))return"?"===i?c:i;return e}function s(e,t){if(typeof e===f&&(t=e,e=c),!(this instanceof s))return new s(e,t).getResult();var i=e||(typeof r!=l&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:u),n=t?function(e,t){var i,n={};for(i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n}(W,t):W;return this.getBrowser=function(){var e,t={};return t[m]=c,t[y]=c,o.call(t,i,n.browser),t.major=typeof(e=t.version)===d?e.replace(/[^\d\.]/g,u).split(".")[0]:c,t},this.getCPU=function(){var e={};return e[b]=c,o.call(e,i,n.cpu),e},this.getDevice=function(){var e={};return e[g]=c,e[p]=c,e[v]=c,o.call(e,i,n.device),e},this.getEngine=function(){var e={};return e[m]=c,e[y]=c,o.call(e,i,n.engine),e},this.getOS=function(){var e={};return e[m]=c,e[y]=c,o.call(e,i,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===d&&255<e.length?a(e,255):e,this},this.setUA(i),this}var n,u="",h="function",l="undefined",f="object",d="string",p="model",m="name",v="type",g="vendor",y="version",b="architecture",i="console",w="mobile",A="tablet",T="smarttv",E="wearable",N="embedded",_="Amazon",S="Apple",j="BlackBerry",k="Browser",I="Chrome",C="Firefox",V="Google",P="Microsoft",L="Motorola",O="Opera",x="Samsung",M="Sony",H="Zebra",B="Facebook",D=function(e){return e.toLowerCase()},F={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},W={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[y,[m,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[y,[m,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[m,y],[/opios[\/ ]+([\w\.]+)/i],[y,[m,O+" Mini"]],[/\bopr\/([\w\.]+)/i],[y,[m,O]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[m,y],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[y,[m,"UC"+k]],[/\bqbcore\/([\w\.]+)/i],[y,[m,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[y,[m,"WeChat"]],[/konqueror\/([\w\.]+)/i],[y,[m,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[y,[m,"IE"]],[/yabrowser\/([\w\.]+)/i],[y,[m,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[m,/(.+)/,"$1 Secure "+k],y],[/\bfocus\/([\w\.]+)/i],[y,[m,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[y,[m,O+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[y,[m,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[y,[m,"Dolphin"]],[/coast\/([\w\.]+)/i],[y,[m,O+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[y,[m,"MIUI "+k]],[/fxios\/([-\w\.]+)/i],[y,[m,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[m,"360 "+k]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[m,/(.+)/,"$1 "+k],y],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],y],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[m,y],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[m],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[m,B],y],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[m,y],[/\bgsa\/([\w\.]+) .*safari\//i],[y,[m,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[y,[m,I+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[m,I+" WebView"],y],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[y,[m,"Android "+k]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[m,y],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[y,[m,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[y,m],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[m,[y,t,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[m,y],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[m,"Netscape"],y],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[y,[m,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[m,y]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,D]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[b,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[b,"armhf"]],[/windows (ce|mobile); ppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[b,/ower/,u,D]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[b,D]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[g,x],[v,A]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[g,x],[v,w]],[/\((ip(?:hone|od)[\w ]*);/i],[p,[g,S],[v,w]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[g,S],[v,A]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[g,"Huawei"],[v,A]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[p,[g,"Huawei"],[v,w]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[g,"Xiaomi"],[v,w]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[g,"Xiaomi"],[v,A]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[g,"OPPO"],[v,w]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[g,"Vivo"],[v,w]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[p,[g,"Realme"],[v,w]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[g,L],[v,w]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[g,L],[v,A]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[g,"LG"],[v,A]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[g,"LG"],[v,w]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[g,"Lenovo"],[v,A]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[g,"Nokia"],[v,w]],[/(pixel c)\b/i],[p,[g,V],[v,A]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[g,V],[v,w]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[g,M],[v,w]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[g,M],[v,A]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[g,"OnePlus"],[v,w]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[g,_],[v,A]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[g,_],[v,w]],[/(playbook);[-\w\),; ]+(rim)/i],[p,g,[v,A]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[g,j],[v,w]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[g,"ASUS"],[v,A]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[g,"ASUS"],[v,w]],[/(nexus 9)/i],[p,[g,"HTC"],[v,A]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[g,[p,/_/g," "],[v,w]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[g,"Acer"],[v,A]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[g,"Meizu"],[v,w]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[g,"Sharp"],[v,w]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[g,p,[v,w]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[g,p,[v,A]],[/(surface duo)/i],[p,[g,P],[v,A]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[g,"Fairphone"],[v,w]],[/(u304aa)/i],[p,[g,"AT&T"],[v,w]],[/\bsie-(\w*)/i],[p,[g,"Siemens"],[v,w]],[/\b(rct\w+) b/i],[p,[g,"RCA"],[v,A]],[/\b(venue[\d ]{2,7}) b/i],[p,[g,"Dell"],[v,A]],[/\b(q(?:mv|ta)\w+) b/i],[p,[g,"Verizon"],[v,A]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[g,"Barnes & Noble"],[v,A]],[/\b(tm\d{3}\w+) b/i],[p,[g,"NuVision"],[v,A]],[/\b(k88) b/i],[p,[g,"ZTE"],[v,A]],[/\b(nx\d{3}j) b/i],[p,[g,"ZTE"],[v,w]],[/\b(gen\d{3}) b.+49h/i],[p,[g,"Swiss"],[v,w]],[/\b(zur\d{3}) b/i],[p,[g,"Swiss"],[v,A]],[/\b((zeki)?tb.*\b) b/i],[p,[g,"Zeki"],[v,A]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[g,"Dragon Touch"],p,[v,A]],[/\b(ns-?\w{0,9}) b/i],[p,[g,"Insignia"],[v,A]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[g,"NextBook"],[v,A]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[g,"Voice"],p,[v,w]],[/\b(lvtel\-)?(v1[12]) b/i],[[g,"LvTel"],p,[v,w]],[/\b(ph-1) /i],[p,[g,"Essential"],[v,w]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[g,"Envizen"],[v,A]],[/\b(trio[-\w\. ]+) b/i],[p,[g,"MachSpeed"],[v,A]],[/\btu_(1491) b/i],[p,[g,"Rotor"],[v,A]],[/(shield[\w ]+) b/i],[p,[g,"Nvidia"],[v,A]],[/(sprint) (\w+)/i],[g,p,[v,w]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[g,P],[v,w]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[g,H],[v,A]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[g,H],[v,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[g,p,[v,i]],[/droid.+; (shield) bui/i],[p,[g,"Nvidia"],[v,i]],[/(playstation [345portablevi]+)/i],[p,[g,M],[v,i]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[g,P],[v,i]],[/smart-tv.+(samsung)/i],[g,[v,T]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[g,x],[v,T]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[g,"LG"],[v,T]],[/(apple) ?tv/i],[g,[p,S+" TV"],[v,T]],[/crkey/i],[[p,I+"cast"],[g,V],[v,T]],[/droid.+aft(\w)( bui|\))/i],[p,[g,_],[v,T]],[/\(dtv[\);].+(aquos)/i],[p,[g,"Sharp"],[v,T]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[g,a],[p,a],[v,T]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[v,T]],[/((pebble))app/i],[g,p,[v,E]],[/droid.+; (glass) \d/i],[p,[g,V],[v,E]],[/droid.+; (wt63?0{2,3})\)/i],[p,[g,H],[v,E]],[/(quest( 2)?)/i],[p,[g,B],[v,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[g,[v,N]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[p,[v,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[v,A]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[v,A]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[v,w]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[g,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[y,[m,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[y,[m,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[m,y],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[y,m]],os:[[/microsoft (windows) (vista|xp)/i],[m,y],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[m,[y,t,F]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,"Windows"],[y,t,F]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[y,/_/g,"."],[m,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[m,"Mac OS"],[y,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[y,m],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[m,y],[/\(bb(10);/i],[y,[m,j]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[y,[m,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[y,[m,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[y,[m,"webOS"]],[/crkey\/([\d\.]+)/i],[y,[m,I+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[m,"Chromium OS"],y],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[m,y],[/(sunos) ?([\w\.\d]*)/i],[[m,"Solaris"],y],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[m,y]]},R=(s.VERSION="0.7.31",s.BROWSER=e([m,y,"major"]),s.CPU=e([b]),s.DEVICE=e([p,g,v,i,w,T,A,E,N]),s.ENGINE=s.OS=e([m,y]),typeof G!=l?(G=typeof z!=l&&z.exports?z.exports=s:G).UAParser=s:typeof q===h&&q.amd?q(function(){return s}):typeof r!=l&&(r.UAParser=s),typeof r!=l&&(r.jQuery||r.Zepto));R&&!R.ua&&(n=new s,R.ua=n.getResult(),R.ua.get=function(){return n.getUA()},R.ua.set=function(e){n.setUA(e);var t,i=n.getResult();for(t in i)R.ua[t]=i[t]})}("object"==typeof window?window:this)},{}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){e.pixels=e.pixels||[],e.sources=e.sources||[],e.features=e.features||[],e.options=e.options||{},e.videoClicks=e.videoClicks||{},e.videoClicks.clickTracking=e.videoClicks.clickTracking||[],e.error=e.error||[],e.skipOffset=e.skipOffset||null,e.metadata=e.metadata||{},e.metadata.demandSourceId=e.metadata.demandSourceId||0,t(null,e)}},{}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){e.metadata.protocol=(0,n.getTrueUrlInfo)().topUrl.match(/^(\w+):/)[1]||"https",e.metadata.vpaidJSWrapperVersion=r.vpaidJSWrapperVersion,t(null,e)};var n=e("../util/url"),r=e("../metadata.json")},{"../metadata.json":28,"../util/url":37}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;e=e("../constants.js");function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=e.NODE_TYPE.TEXT_NODE,s=e.NODE_TYPE.CDATA_SECTION_NODE,u=e.NODE_TYPE.COMMENT_NODE;e=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,i,n;return t=e,n=[{key:"allImmediateChildrenByNames",value:function(e,i){var n={};return e&&(e=e.childNodes||[],Array.prototype.forEach.call(e,function(e){var t=e.nodeName;1===e.nodeType&&(!i||0===i.length||-1<i.indexOf(t))&&(n[t]||(n[t]=[]),n[t].push(e))})),n}},{key:"getText",value:function(e){return function e(t){for(var i,n,r="",a=0;i=t[a++];)i.nodeType===o||i.nodeType===s?(n=i.nodeValue&&i.nodeValue.trim())&&(r+=n):i.nodeType!==u&&(r+=e(i.childNodes));return r}([e])}}],(i=null)&&r(t.prototype,i),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();i.default=e},{"../constants.js":19}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){new n.default(e).fire("VISTA_LOADED"),t(null,e)};var n=(i=e("../diag"))&&i.__esModule?i:{default:i}},{"../diag":20}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){!function(e,t,i){t[0]&&(t[0]=n.default.apply(t[0],e));n.default.waterfall(t,i)}(e,[r.default,a.default,o.default,s.default,u.default,l.default,d.default],t)};var n=c(e("async")),r=c(e("./parse_yahoo_adparams.js")),a=c(e("./add_defaults.js")),o=c(e("./add_metadata.js")),s=c(e("./fire_init_pixels.js")),u=c(e("./vast_parser.js")),l=c(e("./map_vast_vpaid.js")),d=c(e("./process_click_tracking.js"));function c(e){return e&&e.__esModule?e:{default:e}}},{"./add_defaults.js":8,"./add_metadata.js":9,"./fire_init_pixels.js":11,"./map_vast_vpaid.js":13,"./parse_yahoo_adparams.js":15,"./process_click_tracking.js":16,"./vast_parser.js":17,async:4}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){e.pixels.forEach(function(e){"progress"===e.event&&void 0!==e.offset&&(e.offset=function(e){var t=e.match(/^(\d{2}):(\d{2}):(\d{2})(.(\d{3}))?$/);if(t)return{type:"time",offset:3600*parseInt(t[1],10)+60*parseInt(t[2],10)+parseInt(t[3],10)+(t[5]?parseInt(t[5],10)/1e3:0)};t=e.match(/^(\d+)%$/);if(t)return{type:"percentage",offset:parseInt(t[1],10)};return null}(e.offset));var t=n[e.event];t&&(e.event=t)}),t(null,e)};var n={skip:"AdSkipped",creativeView:"AdStarted",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",acceptInvitation:"AdUserAcceptInvitation",collapse:"AdUserMinimize",close:"AdUserClose",pause:"AdPaused",resume:"AdPlaying",error:"AdError"}},{}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){var t=new o.default,e=(t.width=+e.getAttribute("width")||0,t.height=+e.getAttribute("height")||0,t.xPosition=+e.getAttribute("xPosition")||e.getAttribute("xPosition"),t.yPosition=+e.getAttribute("yPosition")||e.getAttribute("yPosition"),t.offset=(0,a.timeToSec)(e.getAttribute("offset")||""),t.duration=(0,a.timeToSec)(e.getAttribute("duration")||""),s.default.allImmediateChildrenByNames(e)),i=e.IconClicks[0],i=s.default.allImmediateChildrenByNames(i),n=i.IconClickThrough&&i.IconClickThrough[0],i=i.IconClickTracking&&i.IconClickTracking[0];{var r;e.StaticResource&&e.StaticResource[0]&&(r=e.StaticResource[0],t.staticResourceUrl=s.default.getText(r).trim(),t.staticResourceType=r.getAttribute("creativeType"))}e.IconViewTracking&&e.IconViewTracking[0]&&(t.viewTrackingUrl=s.default.getText(e.IconViewTracking[0]).trim());n&&(t.clickThroughUrl=s.default.getText(n).trim());i&&(t.clickTrackingUrl=s.default.getText(i).trim());return t};var a=e("../util/timeToSec.js"),o=n(e("../model/icon.js")),s=n(e("./dom.js"));function n(e){return e&&e.__esModule?e:{default:e}}},{"../model/icon.js":29,"../util/timeToSec.js":36,"./dom.js":10}],15:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e){var i=null,n=null;if("object"===a(t))i=t;else try{i=function(e){var t={};try{var i=JSON.parse(e);if(i){f(i.viewableImpression,function(e){t.viewabilityBeaconUrl=e}),t.pixels=t.pixels||[];var n,r=i.impression,a=(t.pixels=t.pixels.concat(p(r).map(function(e){return{event:"impression",url:e}})),t.sources=i.sources||[],i.mediaFiles),o=(t.sources=t.sources.concat(p(a).map(function(e){return{url:e.value&&e.value.replace(/^\s+|\s+$/g,""),mimetype:e.type,apiFramework:e.apiFramework,bitrate:e.bitrate}})),i.vastAdTagURI),s=(t.sources=t.sources.concat(p(o).map(function(e){return{url:e&&e.replace(/^\s+|\s+$/g,""),mimetype:"application/xml"}})),i.trackingEvents),u=(t.pixels=t.pixels.concat(p(s).map(function(e){return{event:e.eventType,url:e.value,offset:e.offset}})),i.error),l=(t.error=t.error||[],t.error=t.error.concat(p(u).map(function(e){return{event:"error",url:e}})),t.videoClicks=t.videoClicks||{},t.videoClicks.clickTracking=t.videoClicks.clickTracking||[],i.videoClicks&&i.videoClicks.clickTracking&&(n=i.videoClicks.clickTracking,t.videoClicks.clickTracking=t.videoClicks.clickTracking.concat(p(n).map(function(e){return e}))),i.videoClicks&&i.videoClicks.clickThrough&&f(i.videoClicks.clickThrough,function(e){t.videoClicks.clickThrough=e}),t.metadata=t.metadata||{},i.moatParams);if(l)for(var d in l){var c=d,h=l[d];c&&h&&(t.metadata[c]=h)}}}catch(e){throw new Error("JSON parsing error: "+e.message)}return t}(t)}catch(e){try{i=function(e){var t,i={};try{n=window.atob(e)}catch(e){throw new Error("XML parsing error: "+e.message)}if(null!==n)try{if(0<(t=(0,r.parseXml)(n)).getElementsByTagName("parsererror").length||t.parseError&&0!==t.parseError.errorCode)throw new Error(t.getElementsByTagName("parsererror")[0].nodeValue)}catch(e){throw new Error("XML parsing error: "+e.message)}{var n;"YahooViewability"===t.documentElement.nodeName&&(o(t.getElementsByTagName("ViewableImpression"),function(e){i.viewabilityBeaconUrl=e.textContent}),i.pixels=i.pixels||[],o(t.getElementsByTagName("Impression"),function(e){i.pixels.push({event:"impression",url:e.textContent})}),i.sources=i.sources||[],o(t.getElementsByTagName("MediaFile"),function(e){i.sources.push({url:e.textContent&&e.textContent.replace(/^\s+|\s+$/g,""),mimetype:e.getAttribute("type"),apiFramework:e.getAttribute("apiFramework")})}),o(t.getElementsByTagName("VASTAdTagURI"),function(e){i.sources.push({url:e.textContent&&e.textContent.replace(/^\s+|\s+$/g,""),mimetype:"application/xml"})}),o(t.getElementsByTagName("Tracking"),function(e){i.pixels.push({event:e.getAttribute("event"),url:e.textContent})}),e=t.getElementsByTagName("Error"),i.error=i.error||[],o(e,function(e){i.error.push({event:e.getAttribute("event"),url:e.textContent})}),i.videoClicks=i.videoClicks||{},i.videoClicks.clickTracking=i.videoClicks.clickTracking||[],o(t.getElementsByTagName("ClickTracking"),function(e){i.videoClicks.clickTracking.push(e.textContent)}),(n=t.getElementsByTagName("ClickThrough")[0])&&(i.videoClicks.clickThrough=n.textContent),i.metadata=i.metadata||{},(e=function(e){e=e.getElementsByTagName("MOATparams")[0];if(e)return e.childNodes}(t))&&o(e,function(e){var t=e.nodeName,e=e.textContent;t&&e&&(i.metadata[t]=e)}))}return i}(t)}catch(e){n=e}}return e(n,i)};var r=e("../util/xml.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){[].forEach.call(e=e||[],t)}function f(e,t){e?Array.isArray(e)||(e=[e]):e=[],e.forEach(t)}function p(e){return e?Array.isArray(e)||(e=[e]):e=[],e}},{"../util/xml.js":39}],16:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e){t.videoClicks.clickTracking.forEach(function(e){return t.pixels.push({event:"AdClickThru",url:e})}),e(null,t)}},{}],17:[function(e,t,i){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){var i=function(e){var t=e.sources,i=null;t&&(e.sources=t.filter(function(e){return"application/xml"!==e.mimetype||(i=e.url,!1)}));return i}(e);e.debugData={vastUri:i},e.vastXmls=[],e.icons=[],i?d(i,e,t,0):t(null,e)};var h=r(e("../diag.js")),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var i,n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in e){var a;"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&((a=r?Object.getOwnPropertyDescriptor(e,i):null)&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i])}n.default=e,t&&t.set(e,n);return n}(e("../macros")),f=e("../constants.js"),l=r(e("./parse_icon_element.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(s=function(e){return e?i:t})(e)}function r(e){return e&&e.__esModule?e:{default:e}}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var a=5;function d(o,s,u,l){var d,c=new h.default(s);o=n.expand(o,null,[n.pageUrl]),a<=l?c.fire("VAST_MAX_DEPTH",function(){u(new Error("max VAST unwrapping depth reached"))}):(d=new XMLHttpRequest,-1===o.indexOf("s.yimg.com")&&-1===o.indexOf("l.yimg.com")&&(d.withCredentials=!0),0<=[].indexOf(o)&&(d.withCredentials=!1),d.onreadystatechange=function(){var e,t,i,n,r,a;4!==d.readyState||(e=function(e,t,i){var n=p({},f.DM_MSG.REQ_STATUS,e.status),r={generalError:!1,corsError:!1};200!==e.status?null!==e.responseURL&&0===e.responseURL.length&&null===e.responseXML?r.corsError=!0:(t.fire("VAST_NOT_FOUND",function(){i(new Error("parseVast error: response status: "+e.status))},n),r.generalError=!0):e.responseXML||(t.fire("VAST_PARSER_ERROR",function(){i(new Error("parseVast error: missing responseXML"))},n),r.generalError=!0);return r}(d,c,u)).generalError||(e.corsError?(e=o,t=s,i=u,n=l,r=c,(a=new XMLHttpRequest).onreadystatechange=function(){var e=p({},f.DM_MSG.REQ_STATUS,a.status);4===a.readyState&&(200!==a.status?r.fire("VAST_CORS_ERROR",function(){i(new Error("VAST_CORS_ERROR"))},e):m(t,a,i,n,r))},a.withCredentials=!1,a._url=e,a.open("GET",e),a.send()):m(s,d,u,l,c))},d._url=o,d.open("GET",o),d.send())}function m(e,t,i,n,r){e.vastXmls.push(t.responseXML);var a,u,o=function(e){e=e.getElementsByTagName("Ad")[0];if(e)return e.firstElementChild.tagName;return null}(t.responseXML);switch(o){case"Wrapper":var s=function(e){e=e.getElementsByTagName("VASTAdTagURI")[0];if(e)return e.textContent;return null}(t.responseXML);s?d(s,e,i,n+1):r.fire("VAST_WRAPPER_URI_MISSING",function(){i(new Error("VASTAdTag URI not found"))});break;case"InLine":try{(u=e).vastXmls.forEach(function(e){var t=u,i=new h.default(t);if(!(e=e.getElementsByTagName("Ad")[0])||1!==e.childElementCount||"null"===e)throw i.fire("VAST_MALFORMED"),Error("parseVastXml error: invalid VAST format");c(e.getElementsByTagName("Impression"),function(e){t.pixels.push({event:"impression",url:e.textContent})});for(var n=e.getElementsByTagName("Creative"),i=e.getElementsByTagName("Linear")[0],r=(t.skipOffset=i.getAttribute("skipoffset")||null,[]),a=0,o=n.length;a<o;a++)r.push(n[a]);r.sort(function(e,t){return(e.getAttribute("sequence")||0)-(t.getAttribute("sequence")||0)});var s=[];r.forEach(function(e){var t,i=e.getElementsByTagName("MediaFile");for(t in i)1===i[t].nodeType&&s.push(i[t])}),s.length<1&&(s=e.getElementsByTagName("MediaFile")),t.sources=[],c(s,function(e){t.sources.push({url:e.textContent&&e.textContent.replace(/^\s+|\s+$/g,""),mimetype:e.getAttribute("type"),apiFramework:e.getAttribute("apiFramework"),bitrate:e.getAttribute("bitrate")})}),c(e.getElementsByTagName("Tracking"),function(e){t.pixels.push({event:e.getAttribute("event"),url:e.textContent})}),c(i=e.getElementsByTagName("ClickTracking"),function(e){t.videoClicks.clickTracking.push(e.textContent)}),(i=e.getElementsByTagName("ClickThrough")[0])&&(t.videoClicks.clickThrough=i.textContent),(i=e.getElementsByTagName("AdParameters")[0])&&(t.thirdPartyAdParams=i.textContent),(i=function(e){var t=null,e=e.getElementsByTagName("Icons")[0];!e||(e=e.getElementsByTagName("Icon")[0])&&(t=(0,l.default)(e));return t}(e))&&t.icons.push(i)}),a=u}catch(e){return void i(new Error("addAdParams error: "+e.message))}i(null,a);break;default:r.fire("VAST_MISSING_AD_TYPE",function(){i(new Error("vast error: no ad type found"))},p({},f.DM_MSG.AD_TYPE,o))}}function c(e,t){[].forEach.call(e=e||[],t)}},{"../constants.js":19,"../diag.js":20,"../macros":27,"./parse_icon_element.js":14}],18:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;i.default={adPlaybackTimeout:6e5,vpaidCreativeMethodTimeout:2e4,scoutWatchShouldFire:{AdImpression:!0,AdVideoStart:!0,AdVideoFirstQuartile:!0,AdVideoMidpoint:!0,AdVideoThirdQuartile:!0,AdVideoComplete:!0,AdStopped:!0,AdError:!0,AdClickThru:!0,AdSizeChange:!0,AdDurationChange:!0}}},{}],19:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.VIDEO_MEDIA_ERR=i.NODE_TYPE=i.IMAGE_TYPES=i.DM_MSG=void 0;i.DM_MSG={ERROR_MSG:"errMsg",TAG_STATUS_CODE:"tagStatusCode",REQ_STATUS:"reqStatus",AD_TYPE:"adType",MIME:"mime",URL:"url",ELAPSED_TIME:"et"},i.VIDEO_MEDIA_ERR={ABORTED:1,NETWORK:2,DECODE:3,SRC_NOT_SUPPORTED:4},i.NODE_TYPE={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};i.IMAGE_TYPES=["image/jpeg","image/jpg","image/gif","image/png"]},{}],20:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.MAX_DM_URL_LENGTH=void 0;var r=n(e("./util/fire.js")),a=n(e("../lib/version.js")),o=e("./constants.js"),s=e("./util/url.js"),u=n(e("./util/sanitizeUrl.js"));function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var d=e("ua-parser-js"),c=(i.MAX_DM_URL_LENGTH=800,{VAST_NOT_FOUND:20001,VAST_PARSER_ERROR:20002,VAST_WRAPPER_URI_MISSING:20003,VAST_MALFORMED:20004,VAST_NO_AD:20005,VAST_MAX_DEPTH:20006,VAST_MISSING_AD_TYPE:20007,VAST_CORS_ERROR:20009,VPAID_HANDSHAKE_FAIL:20010,VPAID_LOAD_ERROR:20011,VPAID_LOAD_TIMEOUT:20012,VPAID_PROTOCOL_NOT_SUPPORTED:20014,VPAID_INTERNAL_ERROR:20015,NO_VIDEO_SLOT:20201,VPAID_NONVITAL_METHOD_TIMEOUT:20202,VPAID_STATE_INCONSISTENCY:20203,AD_DURATION_NOT_SUPPORTED:20204,SUBSCRIBER_ERROR:20206,VISTA_UNCAUGHT_ERROR:20207,NO_COMPATIBLE_VIDEO:20208,PUBLISHER_UNCAUGHT_ERROR:20209,VIDEO_MEDIA_ERR_ABORTED:20210,VIDEO_MEDIA_ERR_NETWORK:20211,VIDEO_MEDIA_ERR_DECODE:20212,VIDEO_MEDIA_ERR_SRC_NOT_SUPPORTED:20213,VIDEO_MEDIA_ERR_UNKNOWN:20214,VPAID_HANDSHAKE_TIMEOUT:20215,VPAID_INIT_AD_TIMEOUT:20216,VPAID_START_AD_TIMEOUT:20217,VPAID_STOP_AD_TIMEOUT:20218,VISTA_LOADED:6e4,VISTA_IMP:60001,VISTA_AD_VIDEO_COMPLETE:60002,VISTA_AD_VIDEO_START:60003,VISTA_AD_VIDEO_STOP:60004,VISTA_AD_VIDEO_START_STARTING:60005,VISTA_AD_VIDEO_LOADED_STARTING:60006,VISTA_AD_VIDEO_LOADED:60007}),h={AdImpression:"VISTA_IMP"},f=/:/g,p=/\//g,e=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.adParams=e||{},this.version=a.default,this.pageUrl="undefined"==typeof window?null:(0,u.default)((0,s.getTrueUrlInfo)().topUrl)}var e,i,n;return e=t,(i=[{key:"addDesiredBitrateInfo",value:function(e){this.adParams.desiredBitrate=e}},{key:"addServedBitrateInfo",value:function(e){this.adParams.servedBitrate=e}},{key:"_getUrlForName",value:function(e,t){e="JS-"+c[e];if(void 0===this.adParams.browser)try{var i=this._getUserAgent();this.adParams.browser=this._getBrowserFromUserAgent(i)}catch(e){}var i=this.adParams.error&&this.adParams.error[0]&&this.adParams.error[0].url||"",n=(this.adParams&&this.adParams.browser&&(e=e+",rb:"+this.adParams.browser),this.adParams&&this.adParams.selectedFileType&&(e=e+",rm:"+this.adParams.selectedFileType),t&&Object.prototype.hasOwnProperty.call(t,o.DM_MSG.ERROR_MSG)&&(e+=",emsg:"+t[o.DM_MSG.ERROR_MSG].trim().substring(0,800).replace(f,"_")),e=(e+=",vv:"+this.version)+(",pu:"+this.pageUrl.replace(f,"_").replace(p,"⁄")),{});return t&&(n[o.DM_MSG.TAG_STATUS_CODE]=t[o.DM_MSG.TAG_STATUS_CODE],n[o.DM_MSG.REQ_STATUS]=t[o.DM_MSG.REQ_STATUS],n[o.DM_MSG.AD_TYPE]=t[o.DM_MSG.AD_TYPE],n[o.DM_MSG.MIME]=t[o.DM_MSG.MIME],n[o.DM_MSG.ELAPSED_TIME]=t[o.DM_MSG.ELAPSED_TIME]),e+=",dm:"+btoa(JSON.stringify(n)),i.replace(/(##|\[)ERRORCODE(##|\])/gi,e)}},{key:"getUrlByEvent",value:function(e){e=h[e];return e&&this._getUrlForName(e)}},{key:"fire",value:function(e,t,i){(0,r.default)(this._getUrlForName(e,i),t)}},{key:"_getUserAgent",value:function(){return navigator&&navigator.userAgent}},{key:"_getBrowserFromUserAgent",value:function(e){e=d(e);return e&&e.browser&&e.browser.name+e.browser.major}}])&&l(e.prototype,i),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();i.default=e},{"../lib/version.js":3,"./constants.js":19,"./util/fire.js":32,"./util/sanitizeUrl.js":35,"./util/url.js":37,"ua-parser-js":7}],21:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(e("async")),s=n(e("../util/fire.js")),r=n(e("./providers/index.js"));function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.params=e,this.pixelProviders=(0,r.default)(e),this.diag=null,this.internalSubscribers={},this.externalSubscribers={}}var e,i,n;return e=t,(i=[{key:"init",value:function(e){for(var t in this.pixelProviders)this.pixelProviders[t].init(e);this.diag=e.diag}},{key:"addExternalSubscriber",value:function(e,t,i){var n=this.externalSubscribers[t]||[];n.push({callback:e,context:i}),this.externalSubscribers[t]=n}},{key:"addInternalSubscriber",value:function(e,t,i){var n=this.internalSubscribers[t]||[];n.push({callback:e,context:i}),this.internalSubscribers[t]=n}},{key:"removeSubscriber",value:function(e,t){u(this.internalSubscribers,e,t),u(this.externalSubscribers,e,t)}},{key:"fire",value:function(i,e,n,t){var r=this,a=this.pixelProviders&&Object.keys(this.pixelProviders).reduce(function(e,t){return e.concat(r.pixelProviders[t].getUris(i,n))},[]);o.default.each(a,function(e,t){(0,s.default)(e,t)},function(){try{l(r.internalSubscribers,i,e),l(r.externalSubscribers,i,e)}catch(e){return void r.handleFireException(i,e,n)}t&&t()})}},{key:"fireSync",value:function(i,e,n,t){var r=this,a=this.pixelProviders&&Object.keys(this.pixelProviders).reduce(function(e,t){return e.concat(r.pixelProviders[t].getUris(i,n))},[]);try{l(this.internalSubscribers,i,e),l(this.externalSubscribers,i,e)}catch(e){this.handleFireException(i,e,n)}o.default.each(a,function(e,t){(0,s.default)(e,t)},function(){t&&t()})}},{key:"handleFireException",value:function(e,t,i){var n,r,a=this;"AdError"!==e&&(null!==t&&(n=t.message,(r=t.stack.toString().split(/\r\n|\n/))&&1<r.length&&(n+=" "+window.btoa("stack1: "+r[1]+"stackn: "+r[r.length-1]))),this.diag&&this.diag.fire("SUBSCRIBER_ERROR",function(){a.fire("AdError",["Error occurred when firing ".concat(e," event handlers: ").concat(t.message)],i)},e+" event handlers: "+n))}},{key:"getProviders",value:function(){return this.pixelProviders}}])&&a(e.prototype,i),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(e,t,i){var n=e[i];n&&(e[i]=n.filter(function(e){return e.callback!==t}))}function l(e,t,i){e=e[t];!i||Array&&Array.isArray&&Array.isArray(i)||(i=[i]),e&&e.forEach(function(e){var t=e.callback,e=e.context;return t.apply(e||null,i)})}i.default=e},{"../util/fire.js":32,"./providers/index.js":24,async:4}],22:[function(e,t,i){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.eventPixelMap={},this.adParams=null}var t,i,n;return t=e,(i=[{key:"init",value:function(e){var i=this;this.adParams=e.adParams,this.adParams.pixels.forEach(function(e){var t=e.event,e=e.url;t&&e&&"progress"!==t&&(i.eventPixelMap[t]=i.eventPixelMap[t]||[],i.eventPixelMap[t].push(e))})}},{key:"getUris",value:function(e){return this.eventPixelMap[e]||[]}}])&&r(t.prototype,i),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();i.default=n},{}],23:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=(e=e("../../diag"))&&e.__esModule?e:{default:e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.diag=null}var t,i,n;return t=e,(i=[{key:"init",value:function(e){this.diag=new r.default(e.adParams)}},{key:"getUris",value:function(e,t){return this.diag&&(e=this.diag.getUrlByEvent(e))?[e]:[]}}])&&a(t.prototype,i),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();i.default=e},{"../../diag":20}],24:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){return{AdParamsProvider:new n.default(e),MoatProvider:new a.default(e),DiagProvider:new r.default(e),InsideVideoProvider:new o.default(e)}};var n=s(e("./ad_params")),r=s(e("./diag")),a=s(e("./moat")),o=s(e("./inside-video"));function s(e){return e&&e.__esModule?e:{default:e}}},{"./ad_params":22,"./diag":23,"./inside-video":25,"./moat":26}],25:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=(e=e("../../../lib/inside-video"))&&e.__esModule?e:{default:e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.adParams=null}var t,i,n;return t=e,(i=[{key:"init",value:function(e){this.adParams=e.adParams;this.adParams.metadata;this.adParams&&(e.vpaidJSWrapper&&e.vpaidJSWrapper.videoSlot&&(e.adWHeight=e.vpaidJSWrapper.videoSlot.offsetHeight,e.adWidth=e.vpaidJSWrapper.videoSlot.offsetWidth,e.videoSlot=e.vpaidJSWrapper.videoSlot),e.slot&&(0,r.default)(e))}},{key:"getUris",value:function(e){return[]}}])&&a(t.prototype,i),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();i.default=e},{"../../../lib/inside-video":1}],26:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=(e=e("../../../lib/moat"))&&e.__esModule?e:{default:e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.adParams=null}var t,i,n;return t=e,(i=[{key:"init",value:function(e){this.adParams=e.adParams;var t=this.adParams.metadata;this.adParams&&this.adParams.metadata&&(t={level1:"Yahoo!",level2:t.campaignID,level3:t.lineItemID,level4:t.creativeID,slicer1:t.publisherID,slicer2:t.sitePlacementID,sampling:"1.0",viewMode:"normal",zMoatAuctionID:t.auctionID,zMoatAdReqDomain:t.adRequestDomainName},e.slot&&(0,r.default)(e.vpaidJSWrapper,e.slot,t,"yahoovpaidtwoint215831825037"))}},{key:"getUris",value:function(e){return[]}}])&&a(t.prototype,i),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();i.default=e},{"../../../lib/moat":2}],27:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.demandSourceId=i.creativeIdHacker=i.creativeId=i.adRequestDomainName=void 0,i.expand=function(i,n,e){return e.forEach(function(e){var t;try{t=e.replacement(n)}catch(e){t="undefined"}i=i.replace(e.regex,t)}),i},i.xtraHacker=i.xtra=i.vpaidJSWrapperVersion=i.timeStamp=i.sitePlacementId=i.publisher=i.protocol=i.pageUrl=i.lineItemId=i.insertionOrderId=void 0;var n=e("./util/url.js");i.adRequestDomainName={regex:/##AD_REQUEST_DOMAIN_NAME##/gi,replacement:function(e){return String(e.metadata.adRequestDomainName)}};e={regex:/(##|\[)CREATIVE_ID(##|\])/gi,replacement:function(e){return String(e.metadata.creativeId)}},i.creativeId=e,e={regex:/(##|\[)CREATIVE_ID_HACKER(##|\])/gi,replacement:function(e){return String(e.metadata.creativeId)}},i.creativeIdHacker=e,e={regex:/(\[)demand_source_id(\])/gi,replacement:function(e){return String(e.metadata.demandSourceId)}},i.demandSourceId=e,e={regex:/(##|\[)VISTA_VERSION(##|\])/gi,replacement:function(e){return String(e.metadata.vpaidJSWrapperVersion)}},i.vpaidJSWrapperVersion=e,e={regex:/(##|\[)IO_ID(##|\])/gi,replacement:function(e){return String(e.metadata.insertionOrderId)}},i.insertionOrderId=e,e={regex:/(##|\[)LINE_ITEM_ID(##|\])/gi,replacement:function(e){return String(e.metadata.lineItemId)}},i.lineItemId=e,e={regex:/(##|\[)(SITE_PLACEMENT_ID|SITE_ID|SITE_PLACEMENT)(##|\])/gi,replacement:function(e){return String(e.metadata.sitePlacementId)}},i.sitePlacementId=e,e={regex:/(##|\[)PAGE_URL(##|\])/gi,replacement:function(e){return String((0,n.getTrueUrlInfo)().topUrl)}},i.pageUrl=e,e={regex:/(##|\[)PROTOCOL(##|\])/gi,replacement:function(e){return String(e.metadata.protocol)}},i.protocol=e,e={regex:/(##|\[)(PUBLISHER|PUBLISHER_ID)(##|\])/gi,replacement:function(e){return String(e.metadata.publisherId)}},i.publisher=e,e={regex:/(##|%|\[)TIMESTAMP(##|%|\])/gi,replacement:function(e){return(new Date).toUTCString()}},i.timeStamp=e,e={regex:/(##|\[)XTRA(##|\])/gi,replacement:function(e){return String(e.metadata.xtra)}},i.xtra=e,e={regex:/(##|\[)XTRA_HACKER(##|\])/gi,replacement:function(e){return String(e.metadata.xtra)}};i.xtraHacker=e},{"./util/url.js":37}],28:[function(e,t,i){t.exports={vpaidJSWrapperVersion:"VISTA_1_2_VERSION"}},{}],29:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=e("../constants.js");function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.width=null,this.height=null,this.xPosition="",this.yPosition="",this.staticResourceUrl="",this.staticResourceType="",this.clickThroughUrl="",this.clickTrackingUrl="",this.viewTrackingUrl="",this.offset=null,this.duration=null}var t,i,n;return t=e,(i=[{key:"hasSupportedResource",value:function(){var e=(this.staticResourceType||"").toLowerCase();return this.staticResourceUrl&&-1!==r.IMAGE_TYPES.indexOf(e)}}])&&a(t.prototype,i),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();i.default=e},{"../constants.js":19}],30:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=(e=e("./util/fire.js"))&&e.__esModule?e:{default:e};function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.hasCPVPixel=!1,this.events=[]}var t,i,n;return t=e,(i=[{key:"addListenerPercentage",value:function(e,t,i){this.events.push({offset:{percentage:t,time:1/0},callback:{method:e,context:i},uri:""})}},{key:"addURI",value:function(e,t){this.hasCPVPixel=!0,this.events.push({offset:{percentage:1/0,time:t},callback:{method:null,context:null},uri:e})}},{key:"addURIPercentage",value:function(e,t){this.hasCPVPixel=!0,this.events.push({offset:{percentage:t,time:1/0},callback:{method:null,context:null},uri:e})}},{key:"checkAndFire",value:function(t,e,i,n){var r=(t*=1.04)/e*100;this.events=this.events.filter(function(e){return!(e.offset.time<=t||e.offset.percentage<=r)||(e.uri&&(0,a.default)(e.uri),e.callback.method&&e.callback.method.apply(e.callback.context||null,i),!1)}),n&&n()}},{key:"hasProgressPixel",value:function(){return this.hasCPVPixel}}])&&r(t.prototype,i),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();i.default=e},{"./util/fire.js":32}],31:[function(e,t,i){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.startTime=a()}var t,i,n;return t=e,(i=[{key:"getCurrentTime",value:function(){return(a()-this.startTime)/1e3}}])&&r(t.prototype,i),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(){return(new Date).getTime()}i.default=n},{}],32:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t,i){function n(){t&&t()}var r=new Image;r.onload=n,r.onerror=n,r.src=e}},{}],33:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){var t=(e=(e=(e=e.substring(0,-1===e.indexOf("#")?e.length:e.indexOf("#"))).substring(0,-1===e.indexOf("?")?e.length:e.indexOf("?"))).substring(e.lastIndexOf("/")+1,e.length)).substring(e.lastIndexOf(".")+1,e.length);if(e!==t&&t.length<5)return t}},{}],34:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){var i={},t=e&&e.match(/^\s*(\w+):/);t&&t[1]?i.protocol=t[1]:i.protocol="https";t=e&&e.split("?")[1];t&&t.split("&").forEach(function(e){var t=e.split("=");switch(t[0]){case"p":i.publisherId=t[1];break;case"s":i.sitePlacementId=t[1];break;case"l":i.lineItemId=t[1];break;case"ds":i.demandSourceId=t[1];break;case"ic":i.creativeId=t[1];break;case"x":i.xtra=t[1];break;case"au":i.auctionId=t[1];break;case"debug":i.debug="y"===t[1]}});return i}},{}],35:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",i=0;return["?","#"].forEach(function(e){-1!==(i=t.indexOf(e))&&(t=t.substring(0,i))}),t}},{}],36:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.timeToSec=function(e){if(""===e)return 0;e=e.split(".")[0];for(var t=0,i=e.split(":"),n=(i.reverse(),[1,60,3600]),r=0;r<i.length;r++)t+=i[r]*n[r];return t}},{}],37:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getTrueUrlInfo=function(){var e,t,i,n,r=window.location.href,a="0",o="",s="",u="",l="";if(window.self===window.top)l=s=r,u="noFrames";else if(a="1",function(){try{return void 0!==window.top.location.href}catch(e){return!1}}())o=window.parent.location.href,s=window.top.location.href,l=r+"||"+o+"||"+s,u="sameDomain";else if(function(){try{return void 0!==window.location.ancestorOrigins}catch(e){return!1}}()){for(e=window.location.ancestorOrigins,t=[],n=0;n<e.length;n+=1)t[n]=e[n];i=t.join("||"),l=r+"||"+i,o=t[0],s=t[t.length-1],u="ancestorOrigins"}else o=document.referrer,s=""!==o?o:r,l=r+"||"+o,u="referer";return{inIframe:a,currentUrl:r,parentUrl:o,topUrl:s,detectionMethod:u,domainChainString:l,encodedDomainChainString:encodeURIComponent(l)}},i.getVpaidJSWrapperUrl=function(){for(var e=document.getElementsByTagName("script")||[],t=null,i=0;i<e.length;i++){var n=e[i].getAttribute("src");if(n&&n.match(/\/vista\.js/)){t=n;break}}return t}},{}],38:[function(e,t,i){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,i){(e=l(e)).forEach(function(e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e.style[t]=i[t])})}function n(e){return d(e,"String")}function r(e){return Array.isArray(e)||s(e)||u(e)}function s(e){return d(e,"HTMLCollection")}function u(e){return d(e,"NodeList")}function l(e){return null!=e?r(e)?e:[e]:[]}function d(e,t){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")}Object.defineProperty(i,"__esModule",{value:!0}),i.createElement=function(e,t){var i=null,n=null,r=null;for(n in i=document.createElement(e),t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&null!==(r=t[n])&&("style"===n&&"object"===a(r)?o(i,r):i.setAttribute(n,Array.isArray(r)?r.join(" "):r));return i},i.isCollection=r,i.isHtmlCollection=s,i.isNodeList=u,i.isString=n,i.openLinkInNewTab=function(e){n(e)&&window.open(e,"_blank")},i.removeFromParent=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},i.setStyle=o,i.toCollection=l},{}],39:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseXml=function(e){{if(void 0!==window.DOMParser)return(new window.DOMParser).parseFromString(e,"text/xml");var t;if(void 0!==window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM"))return(t=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e),t;throw new Error("No XML parser found")}}},{}],40:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=(n=e("../util/fire.js"))&&n.__esModule?n:{default:n},a=e("../util/utils");function o(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this,i=n;if(!(t instanceof i))throw new TypeError("Cannot call a class as a function");this.icon=e,this.url=this.icon&&this.icon.staticResourceUrl||"",this.adView=null,this.iconContainerEl=null,this.iconEl=null,this.isShowing=!1,this._iconEvents={}}var e,t,i;return e=n,(t=[{key:"showInAd",value:function(e){!this.isShowing&&this.icon&&this.icon.hasSupportedResource()&&(this.isShowing=!0,this.adView=e,this.iconContainerEl=this.createIconContainer(),function(){var e="string"==typeof this.icon.xPosition?this.icon.xPosition.toLowerCase():"",t="string"==typeof this.icon.yPosition?this.icon.yPosition.toLowerCase():"";switch(this.iconContainerEl.style.height="".concat(this.icon.height,"px"),this.iconContainerEl.style.width="".concat(this.icon.width,"px"),e){case"left":this.iconContainerEl.style.left="0px";break;case"right":this.iconContainerEl.style.right="0px";break;default:"number"==typeof this.icon.xPosition&&(this.iconContainerEl.style.left="".concat(this.icon.xPosition,"px"))}"bottom"===t?this.iconContainerEl.style.bottom="0px":this.iconContainerEl.style.top="".concat("number"==typeof this.icon.yPosition?this.icon.yPosition:0,"px")}.call(this),this.iconEl=this.createIcon(),e={height:"".concat(this.icon.height,"px"),width:"".concat(this.icon.width,"px")},(0,a.setStyle)(this.iconEl,e))}},{key:"onImageError",value:function(){(0,a.setStyle)(this.iconEl,{display:"none"})}},{key:"onIconClickTracking",value:function(e){e.stopPropagation(),(0,r.default)(this.icon.clickTrackingUrl)}},{key:"onIconClickThrough",value:function(e){e.stopPropagation(),(0,a.openLinkInNewTab)(this.icon.clickThroughUrl)}},{key:"onImageLoaded",value:function(){this.icon.clickThroughUrl&&(this.iconEl.addEventListener("click",this.onIconClickThrough.bind(this)),function(){var e="img:hover{ opacity: 0.6 }",t=document.createElement("style");t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),this.iconEl.appendChild(t)}.call(this)),this.icon.clickTrackingUrl&&this.iconEl.addEventListener("click",this.onIconClickTracking.bind(this)),this.iconContainerEl.appendChild(this.iconEl),this.adView.appendChild(this.iconContainerEl),this.icon.viewTrackingUrl&&r.default.call(this,this.icon.viewTrackingUrl)}},{key:"createIconContainer",value:function(){return(0,a.createElement)("div",{style:{position:"absolute",overflow:"hidden"}})}},{key:"createIcon",value:function(){var e,t,i=(0,a.createElement)("img",{style:{position:"absolute",cursor:"pointer"}});for(t in this._iconEvents=(o(e={},"load",this.onImageLoaded.bind(this)),o(e,"error",this.onImageError.bind(this)),e),this._iconEvents)i.addEventListener(t,this._iconEvents[t],!1);return i.src=this.url.replace(/\s+/g,""),i}},{key:"cleanUp",value:function(){if(this.iconEl)for(var e in this._iconEvents)this.iconEl.removeEventListener(e,this._iconEvents[e],!1);(0,a.removeFromParent)(this.iconContainerEl)}}])&&s(e.prototype,t),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),n}();i.default=n},{"../util/fire.js":32,"../util/utils":38}],41:[function(e,t,i){"use strict";var r=m(e("./config.js")),h=m(e("./diag.js")),o=m(e("./event/event_handler.js")),n=e("./util/url.js"),s=m(e("./util/getMediaFileType.js")),f=m(e("./ad_parser/index.js")),a=m(e("./util/query_params.js")),u=m(e("./util/clock.js")),l=m(e("./progress_events.js")),d=m(e("./vpaid_handler.js")),c=e("./constants.js"),p=m(e("./view/icon-element.js"));function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(i="Object"===i&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function b(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(){}var A=(0,n.getVpaidJSWrapperUrl)(),T=(0,a.default)(A),e=function(){function n(){var a=this;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.videoSlot=null,this.adSlot=null,this.debug=T.debug||!1,this.initialized=!1,this.stopAdCalled=!1,this.errorTimeout=null,this.progressEvents=new l.default,this.eventHandler=new o.default,this.vpaidHandler=new d.default(this.eventHandler),this.diag=null,this.props=null,this.loadAdClock=null,this.startAdClock=null,this.adChoiceIcon=null,this.eventHandler.addInternalSubscriber(function(e){a._cleanUp()},"AdError"),window.onerror=function(e,t,i,n){var r=y({},c.DM_MSG.ERROR_MSG,e);A===t?a.diag&&a.diag.fire("VISTA_UNCAUGHT_ERROR",function(){return a._adError("Vista error occurred: "+e),!0},r):a.diag&&a.diag.fire("PUBLISHER_UNCAUGHT_ERROR",w,r)};var e=0,t=!1,i=!1;this.slotListeners={timeupdate:function(){0===e&&(!i&&0<a.videoSlot.currentTime&&(a._callEventSync("AdImpression"),i=!0),a._callEvent("AdRemainingTimeChange"),a.progressEvents.checkAndFire(a.videoSlot.currentTime,a.videoSlot.duration))},play:function(){1===e&&(a.videoSlot.currentTime=0,e=2)},playing:function(){var e;t||(void 0!==a.videoSlot.src&&a.diag&&a.diag.adParams&&(a.diag.adParams.selectedFileType=(0,s.default)(a.videoSlot.src)),a.adChoiceIcon&&a.adSlot&&a.adChoiceIcon.showInAd(a.adSlot),e=a.startAdClock&&a.startAdClock.getCurrentTime()||-1,a.diag&&a.diag.fire("VISTA_AD_VIDEO_START",w,y({},c.DM_MSG.ELAPSED_TIME,e)),a._callEvent("AdStarted"),t=!0)},seeking:function(){0===e&&(e=1)},seeked:function(){2===e&&(e=0)},ended:function(){0===e&&a.progressEvents.checkAndFire(a.videoSlot.currentTime,a.videoSlot.duration,[],function(){a.diag&&a.diag.fire("VISTA_AD_VIDEO_COMPLETE"),a._callEvent("AdVideoComplete",[],function(){a.stopAdCalled||(a._cleanUp(),a._callEvent("AdStopped"))})})},loadstart:function(){a.diag&&a.diag.fire("VISTA_AD_VIDEO_LOADED_STARTING"),a.loadAdClock=new u.default,a.initialized&&a.videoSlot.networkState===HTMLMediaElement.NETWORK_NO_SOURCE&&a._adError("No valid video sources found")},loadedmetadata:function(){a._callEvent("AdDurationChange")},loadeddata:function(){var e=a.loadAdClock&&a.loadAdClock.getCurrentTime()||-1;a.diag&&a.diag.fire("VISTA_AD_VIDEO_LOADED",w,y({},c.DM_MSG.ELAPSED_TIME,e)),a._callEvent("AdLoaded")},canplay:function(){},click:function(){a._onClick()},contextmenu:function(e){e.preventDefault()},error:function(){var e=a.videoSlot.error&&a.videoSlot.error.code||"",t="";switch(e){case c.VIDEO_MEDIA_ERR.ABORTED:t="VIDEO_MEDIA_ERR_ABORTED";break;case c.VIDEO_MEDIA_ERR.NETWORK:t="VIDEO_MEDIA_ERR_NETWORK";break;case c.VIDEO_MEDIA_ERR.DECODE:t="VIDEO_MEDIA_ERR_DECODE";break;case c.VIDEO_MEDIA_ERR.SRC_NOT_SUPPORTED:t="VIDEO_MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:t="VIDEO_MEDIA_ERR_UNKNOWN"}a.diag&&a.diag.fire(t,function(){a._adError("Error occurred when playing video with code "+e)})}}}var e,t,i;return e=n,(t=[{key:"_callEventSync",value:function(e,t,i){this._callEvent(e,t,i,!0)}},{key:"_callEvent",value:function(e,t,i,n){(n?this.eventHandler.fireSync:this.eventHandler.fire).call(this.eventHandler,e,t,{adTime:this.videoSlot&&this.videoSlot.currentTime,adDuration:this.videoSlot&&this.videoSlot.duration},i)}},{key:"_adError",value:function(e){this._callEvent("AdError",[e])}},{key:"_setTrackingPixels",value:function(e){var r=this;e.forEach(function(e){var t=e.event,i=e.url;if(t&&i&&"progress"===t&&void 0!==e.offset){var n=e.offset;switch(n.type){case"time":r.progressEvents.addURI(i,n.offset);break;case"percentage":r.progressEvents.addURIPercentage(i,n.offset)}}})}},{key:"_setPlaybackEvents",value:function(){var e,t=this,i={AdVideoStart:0,AdVideoFirstQuartile:25,AdVideoMidpoint:50,AdVideoThirdQuartile:75};for(e in i)this.progressEvents.addListenerPercentage(function(e){return function(){t._callEvent(e)}}(e),i[e])}},{key:"_sortByBitrate",value:function(e,t){return t.bitrate-e.bitrate}},{key:"_sortByPlayability",value:function(e,t){var i={probably:2,maybe:1,"":0},e=i[e.isPlayable];return i[t.isPlayable]-e}},{key:"_sortByBitrateValidity",value:function(e,t,i){e=e.bitrate<=i?1:0;return(t.bitrate<=i?1:0)-e}},{key:"_videoChoiceSorter",value:function(i){var n=this;return function(e,t){return e.bitrate>i!=t.bitrate>i?n._sortByBitrateValidity(e,t,i):e.isPlayable!==t.isPlayable?n._sortByPlayability(e,t):n._sortByBitrate(e,t)}}},{key:"_selectVideo",value:function(e,t){var i=this,n=[],e=(e.forEach(function(e){e.isPlayable=i.videoSlot.canPlayType(e.mimetype),n.push(e.mimetype)}),e.filter(function(e){return""!==e.isPlayable}));return e.length||this.diag&&this.diag.fire("NO_COMPATIBLE_VIDEO",w,y({},c.DM_MSG.MIME,n)),e.sort(this._videoChoiceSorter(t))[0]}},{key:"_setVideoSources",value:function(e,t,i){if(e){e=this._selectVideo(e,i);if(e)return this.diag&&this.diag.addServedBitrateInfo(e.bitrate),this.videoSlot.src=e.url,e.url}else this._adError("No videos")}},{key:"_setAdSize",value:function(e,t){this.videoSlot&&(this.videoSlot.width=e,this.videoSlot.height=t,this._callEvent("AdSizeChange"))}},{key:"_onClick",value:function(){var e;this.videoSlot.paused?(this.videoSlot.play(),this._callEvent("AdPlaying")):(e=this.props.adParameters.videoClicks.clickThrough,this._callEvent("AdClickThru",[e||null,"",!1]),window.open(e,"_blank"))}},{key:"_cleanUp",value:function(){if(this.videoSlot)for(var e in this.slotListeners)this.videoSlot.removeEventListener&&this.videoSlot.removeEventListener(e,this.slotListeners[e],!1);this.adSlot&&this.adChoiceIcon&&this.adChoiceIcon.cleanUp(),this.errorTimeout&&window.clearTimeout(this.errorTimeout),this.progressEvents=new l.default}},{key:"_readFeatures",value:function(e){var t=this;e.features.forEach(function(e){"debug"===e&&(t.debug=!0)})}},{key:"_convertStringDuration",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if("number"==typeof e)return e;if(!e.includes(":"))return~~e;e=v(e.split(":"),3);return 60*+e[0]*60+60*+e[1]+ +e[2]}},{key:"_setSkipAdState",value:function(e){this.props.adSkippableState=!0,this._callEvent("AdSkippableStateChange"),clearTimeout(e)}},{key:"_adSkipTimer",value:function(){var e=this,t=this._convertStringDuration(this.props.adParameters.skipOffset),i=setTimeout(function(){e._setSkipAdState(i)},1e3*t)}},{key:"initAd",value:function(r,a,o,s,u,l){for(var d=this,c=new Array(arguments.length),e=0;e<arguments.length;++e)c[e]=arguments[e];var t="string"==typeof u?u:u.AdParameters;(0,f.default)(t,function(e,t){if(d.diag=new h.default(t),e)d._adError(e.message);else if(d.props={adExpanded:!1,adLinear:!0,adSkippableState:!1,adCompanions:"",adIcons:!1,adVolume:1},d.props.width=r,d.props.height=a,d.props.viewMode=o,d.props.desiredBitrate=s,d.videoSlot=l.videoSlot,d._videoSlotCanAutoPlay=l.videoSlotCanAutoPlay,d.diag.addDesiredBitrateInfo(s),d.videoSlot){void 0===d.videoSlot.volume&&(d.videoSlot.volume=d.videoSlot.muted?0:1),d.videoSlot.style&&(d.videoSlot.style.cursor="pointer");e=l.slot;if((d.adSlot=e)&&(e.style.cursor="pointer",e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style["z-index"]="100"),d.videoSlot.autoplay=!1,d._readFeatures(t),d.props.adParameters=t,d.initialized=!0,d.eventHandler.init({adParams:t,vpaidJSWrapper:d,slot:e,diag:d.diag}),d.props.adParameters.pixels&&d._setTrackingPixels(d.props.adParameters.pixels),d.props.adParameters.sources){t=function(e){var t=null;e&&e.some(function(e){return-1<["application/javascript","application/x-javascript"].indexOf(e.mimetype)&&"VPAID"===e.apiFramework&&(t=e.url,!0)});return t}(d.props.adParameters.sources);if(null!==t){for(var i=0;i<c.length;++i)c[i]===u&&(c[i]={AdParameters:d.props.adParameters.thirdPartyAdParams});d.vpaidHandler.loadVPAIDAd(t,d.videoSlot,d.props,d.debug,d.diag,c,d.progressEvents)}else{for(var n in d._setPlaybackEvents(),d.slotListeners)d.videoSlot.addEventListener(n,d.slotListeners[n],!1);e&&(d.props.adParameters.icons&&d.props.adParameters.icons.length&&(d.adChoiceIcon=new p.default(d.props.adParameters.icons[0])),e.addEventListener("click",function(){d._onClick()})),d._setVideoSources(d.props.adParameters.sources,d.props.adParameters.debugData,s)?d.videoSlot.load():d._adError("NO_COMPATIBLE_VIDEO")}}}else d.diag.fire("NO_VIDEO_SLOT",function(){d._adError("No video slot!")})})}},{key:"handshakeVersion",value:function(e){return"2.0"}},{key:"startAd",value:function(){var e=this;this.vpaidHandler.hasAd()?this.vpaidHandler.startAd():(this.diag&&this.diag.fire("VISTA_AD_VIDEO_START_STARTING"),this.startAdClock=new u.default,this.videoSlot.play(),this.props.adParameters.skipOffset&&this._adSkipTimer(),this.errorTimeout=setTimeout(function(){e._adError("Ad playback timed out")},r.default.adPlaybackTimeout))}},{key:"stopAd",value:function(){var e;this.vpaidHandler.hasAd()?this.vpaidHandler.stopAd():(this.videoSlot&&this.videoSlot.pause(),this._cleanUp(),this.progressEvents=new l.default,this.stopAdCalled=!0,e=this.startAdClock&&this.startAdClock.getCurrentTime()||-1,this.diag&&this.diag.fire("VISTA_AD_VIDEO_STOP",w,y({},c.DM_MSG.ELAPSED_TIME,e)),this._callEvent("AdStopped"))}},{key:"setAdVolume",value:function(e){0<=e&&e<=1&&this.videoSlot&&(this.props.adVolume=e,this.vpaidHandler.hasAd()?this.vpaidHandler.setAdVolume(e):(0===this.videoSlot.volume&&0<e?this._callEvent("unmute"):0<this.videoSlot.volume&&0===e&&this._callEvent("mute"),this.videoSlot.volume=e,this._callEvent("AdVolumeChange")))}},{key:"getAdVolume",value:function(){return this.vpaidHandler.hasAd()?this.vpaidHandler.getAdVolume():this.videoSlot?this.videoSlot.volume:void 0}},{key:"resizeAd",value:function(e,t,i){"fullscreen"!==(this.props.viewMode=i)&&(this.props.width=e,this.props.height=t),this.vpaidHandler.hasAd()?this.vpaidHandler.resizeAd(e,t,i):("fullscreen"!==this.props.viewMode&&"fullscreen"===i?this._callEvent("fullscreen"):"fullscreen"===this.props.viewMode&&"fullscreen"!==i&&this._callEvent("exitFullscreen"),this._setAdSize(e,t))}},{key:"pauseAd",value:function(){this.vpaidHandler.hasAd()?this.vpaidHandler.pauseAd():(this.videoSlot.pause(),this._callEvent("AdPaused"))}},{key:"resumeAd",value:function(){this.vpaidHandler.hasAd()?this.vpaidHandler.resumeAd():(this.videoSlot.play(),this._callEvent("AdPlaying"))}},{key:"expandAd",value:function(){this.vpaidHandler.hasAd()?this.vpaidHandler.expandAd():this._callEvent("AdExpandedChange"),this.props.adExpanded=!0}},{key:"getAdExpanded",value:function(){return this.vpaidHandler.hasAd()?this.vpaidHandler.getAdExpanded():this.props.adExpanded}},{key:"getAdSkippableState",value:function(){return this.vpaidHandler.hasAd()?this.vpaidHandler.getAdSkippableState():this.props.adSkippableState}},{key:"collapseAd",value:function(){this.vpaidHandler.hasAd()?this.vpaidHandler.collapseAd():this._callEvent("AdExpandedChange"),this.props.adExpanded=!1}},{key:"skipAd",value:function(){this.vpaidHandler.hasAd()?this.vpaidHandler.skipAd():this.props.adSkippableState&&this._callEvent("AdSkipped")}},{key:"subscribe",value:function(e,t,i){this.eventHandler.addExternalSubscriber(e,t,i)}},{key:"unsubscribe",value:function(e,t){this.eventHandler.removeSubscriber(e,t)}},{key:"getAdWidth",value:function(){return this.vpaidHandler.hasAd()?this.vpaidHandler.getAdWidth():this.videoSlot?this.props.width:void 0}},{key:"getAdHeight",value:function(){return this.vpaidHandler.hasAd()?this.vpaidHandler.getAdHeight():this.videoSlot?this.props.height:void 0}},{key:"getAdRemainingTime",value:function(){return!this.videoSlot||isNaN(this.videoSlot.duration)?-2:this.videoSlot.duration-this.videoSlot.currentTime}},{key:"getAdDuration",value:function(){return!this.videoSlot||isNaN(this.videoSlot.duration)?-2:this.videoSlot.duration}},{key:"getAdCompanions",value:function(){return this.props.adCompanions}},{key:"getAdIcons",value:function(){return this.props.adIcons}},{key:"getAdLinear",value:function(){return this.vpaidHandler.hasAd()&&(this.props.adLinear=this.vpaidHandler.getAdLinear()),this.props.adLinear}}])&&b(e.prototype,t),i&&b(e,i),Object.defineProperty(e,"prototype",{writable:!1}),n}();E=new e;var E,n=function(){return E};"undefined"!=typeof TEST&&TEST&&(n.Vista=e),t.exports=n},{"./ad_parser/index.js":12,"./config.js":18,"./constants.js":19,"./diag.js":20,"./event/event_handler.js":21,"./progress_events.js":30,"./util/clock.js":31,"./util/getMediaFileType.js":33,"./util/query_params.js":34,"./util/url.js":37,"./view/icon-element.js":40,"./vpaid_handler.js":42}],42:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=n(e("./config.js")),r=n(e("./util/getMediaFileType.js")),l=n(e("./util/clock.js")),a=e("./constants.js");function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(){}var c=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],h=["AdSkipped","AdLinearChange","AdExpandedChange","AdSkippableStateChange","AdDurationChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdInteraction","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdUserAcceptInvitation","AdUserMinimize","AdUserClose"],e=function(){function t(e){var n=this;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.eventHandler=e,this.iFrame,this.adUnit,this.adDuration,this.stopped=!1,this.insideJsWorkAround={waitingForAdVideoComplete:!1,receivedAdStop:!1},this.videoSlot=null,this.debug=null,this.props=null,this.diag=null,this.progressEvents=null,this.timeouts={load:null,handshake:null,initAd:null,startAd:null,pauseAd:null,resumeAd:null,stopAd:null},this.adPlayingState=null,this.loadAdClock=null,this.startAdClock=null,this.adEventCBs={AdLoaded:function(){clearTimeout(n.timeouts.initAd);var e=n.loadAdClock&&n.loadAdClock.getCurrentTime()||-1;n.diag.fire("VISTA_AD_VIDEO_LOADED",d,o({},a.DM_MSG.ELAPSED_TIME,e)),n._callEvent("AdLoaded")},AdStarted:function(){n.adPlayingState="AdPlaying",clearTimeout(n.timeouts.startAd),void 0!==n.videoSlot.src&&n.diag&&n.diag.adParams&&(n.diag.adParams.selectedFileType=(0,r.default)(n.videoSlot.src)),n.videoSlot.paused&&n.diag.fire("VPAID_STATE_INCONSISTENCY"),n.adDuration=n.adUnit.getAdDuration(),-1===n.adDuration?n.diag.fire("AD_DURATION_NOT_SUPPORTED"):n.progressEvents.hasProgressPixel()&&n._progressEventCron();var e=n.startAdClock&&n.startAdClock.getCurrentTime()||-1;n.diag.fire("VISTA_AD_VIDEO_START",d,o({},a.DM_MSG.ELAPSED_TIME,e)),n._callEvent("AdStarted")},AdStopped:function(){var e;n.insideJsWorkAround.waitingForAdVideoComplete?n.insideJsWorkAround.receivedAdStop=!0:(n.adPlayingState="AdStopped",clearTimeout(n.timeouts.stopAd),n.stopped||(n.stopped=!0,n._callEvent("AdStopped"),e=n.startAdClock&&n.startAdClock.getCurrentTime()||-1,n.diag.fire("VISTA_AD_VIDEO_STOP",d,o({},a.DM_MSG.ELAPSED_TIME,e))))},AdLog:function(e){n._callEvent("AdLog",e)},AdSizeChange:function(){"fullscreen"!==n.props.viewMode&&(n.props.width>n.videoSlot.width||n.props.height>n.videoSlot.height)&&n.diag.fire("VPAID_STATE_INCONSISTENCY"),n._callEvent("AdSizeChange")},AdPaused:function(){clearTimeout(n.timeouts.pauseAd),n.videoSlot.paused||n.diag.fire("VPAID_STATE_INCONSISTENCY"),n._callEvent("AdPaused")},AdPlaying:function(){clearTimeout(n.timeouts.resumeAd),n.videoSlot.paused&&n.diag.fire("VPAID_STATE_INCONSISTENCY"),n._callEvent("AdPlaying")},AdVolumeChange:function(){n.props.adVolume!==n.adUnit.getAdVolume()&&n.diag.fire("VPAID_STATE_INCONSISTENCY"),n._callEvent("AdVolumeChange")},AdDurationChange:function(){n.adDuration=n.adUnit.getAdDuration(),n._callEvent("AdDurationChange")},AdClickThru:function(e,t,i){e=e||n.props.adParameters.videoClicks.clickThrough,n._callEventSync("AdClickThru",[e||null,t||"",i])},AdVideoComplete:function(){0<n.adDuration&&(n.insideJsWorkAround.waitingForAdVideoComplete=!0,n.progressEvents.checkAndFire(n.adDuration,n.adDuration,[],function(){n.diag.fire("VISTA_AD_VIDEO_COMPLETE"),n._callEvent("AdVideoComplete",[],function(){n.insideJsWorkAround.waitingForAdVideoComplete&&(n.insideJsWorkAround.receivedAdStop?(n.insideJsWorkAround.waitingForAdVideoComplete=!1,n.insideJsWorkAround.receivedAdStop=!1,n.adEventCBs.AdStopped()):n.insideJsWorkAround.waitingForAdVideoComplete=!1)})}))},AdError:function(e){n.diag.fire("VPAID_INTERNAL_ERROR",function(){n._callEvent("AdError",e)},o({},a.DM_MSG.ERROR_MSG,e))}},h.forEach(function(e){n.adEventCBs[e],n.adEventCBs[e]=function(){n._callEvent(e)}})}var e,i,n;return e=t,(i=[{key:"_callEventSync",value:function(e,t,i){this.eventHandler.fireSync(e,t,{adTime:this.videoSlot&&this.videoSlot.currentTime,adDuration:this.videoSlot&&this.videoSlot.duration},i)}},{key:"_callEvent",value:function(e,t,i){this.eventHandler.fire(e,t,{adTime:this.videoSlot&&this.videoSlot.currentTime,adDuration:this.videoSlot&&this.videoSlot.duration},i)}},{key:"_progressEventCron",value:function(){var t=setInterval(function(){this.adDuration=this.adUnit.getAdDuration();var e=this.adUnit.getAdRemainingTime();0<=e&&(e=this.adDuration-e,this.progressEvents.checkAndFire(e,this.adDuration),e>=this.adDuration&&clearInterval(t)),this._callEvent("AdRemainingTimeChange")}.bind(this),250)}},{key:"_adError",value:function(e){this._callEvent("AdError",[e])}},{key:"_fireDiagError",value:function(e){var t=this;this.diag.fire(e,function(){return t._adError(e)})}},{key:"_subscribeAdEvents",value:function(e){for(var t in this.adEventCBs)this.adUnit.subscribe(this.adEventCBs[t],t,this)}},{key:"loadVPAIDAd",value:function(i,e,t,n,r,a,o){var s=this;this.videoSlot=e,this.props=t,this.debug=n,this.diag=r,this.progressEvents=o,this.diag.fire("VISTA_AD_VIDEO_LOADED_STARTING"),this.loadAdClock=new l.default,this.iFrame=document.createElement("iframe"),this.iFrame.id="3rd-party-vpaid-frame",this.iFrame.setAttribute("style","border:0 none"),this.iFrame.setAttribute("width","100%;"),this.iFrame.setAttribute("height","100%;"),this.iFrame.onload=function(){var e=s.iFrame.contentWindow.document,t=e.createElement("script");s.timeouts.load=setTimeout(function(){s._fireDiagError("VPAID_LOAD_TIMEOUT")},u.default.vpaidCreativeMethodTimeout),t.onload=function(){clearTimeout(s.timeouts.load);var t,e=s.iFrame.contentWindow.getVPAIDAd;e&&"function"==typeof e?(s.adUnit=e(),s.timeouts.handshake=setTimeout(function(){s.diag.fire("VPAID_HANDSHAKE_TIMEOUT",function(){s._adError("handshake timed out")})},u.default.vpaidCreativeMethodTimeout),e=s.adUnit.handshakeVersion("2.0"),clearTimeout(s.timeouts.handshake),t=s.adUnit,c.every(function(e){e=t[e];return e&&"function"==typeof e})?(e=e)&&2<=parseFloat(e)?(s._subscribeAdEvents(s.adUnit),s.timeouts.initAd=setTimeout(function(){s.diag.fire("VPAID_INIT_AD_TIMEOUT",function(){s._adError("initAd timed out")})},u.default.vpaidCreativeMethodTimeout),s.adUnit.initAd.apply(s.adUnit,a)):s._fireDiagError("VPAID_HANDSHAKE_FAIL"):s._fireDiagError("VPAID_PROTOCOL_NOT_SUPPORTED")):s._fireDiagError("VPAID_PROTOCOL_NOT_SUPPORTED")},t.onerror=function(e){clearTimeout(s.timeouts.load),s._fireDiagError("VPAID_LOAD_ERROR")},t.src=i,t.type="text/javascript",e.body.appendChild(t)},document.body.appendChild(this.iFrame)}},{key:"hasAd",value:function(){return!!this.adUnit}},{key:"startAd",value:function(){var e=this;"AdPlaying"!==this.adPlayingState&&(clearTimeout(this.timeouts.startAd),this.timeouts.startAd=setTimeout(function(){e.diag.fire("VPAID_START_AD_TIMEOUT",function(){e._adError("startAd timed out")})},u.default.vpaidCreativeMethodTimeout),this.diag.fire("VISTA_AD_VIDEO_START_STARTING"),this.startAdClock=new l.default,this.adUnit.startAd())}},{key:"resizeAd",value:function(e,t,i){this.adUnit.resizeAd(e,t,i)}},{key:"stopAd",value:function(){var e=this;clearTimeout(this.timeouts.stopAd),this.timeouts.stopAd=setTimeout(function(){e.diag.fire("VPAID_STOP_AD_TIMEOUT",function(){e._adError("stopAd timed out")})},u.default.vpaidCreativeMethodTimeout),this.adUnit.stopAd()}},{key:"pauseAd",value:function(){var e=this;clearTimeout(this.timeouts.pauseAd),this.timeouts.pauseAd=setTimeout(function(){e.diag.fire("VPAID_NONVITAL_METHOD_TIMEOUT")},u.default.vpaidCreativeMethodTimeout),this.adUnit.pauseAd()}},{key:"resumeAd",value:function(){var e=this;clearTimeout(this.timeouts.resumeAd),this.timeouts.resumeAd=setTimeout(function(){e.diag.fire("VPAID_NONVITAL_METHOD_TIMEOUT")},u.default.vpaidCreativeMethodTimeout),this.adUnit.resumeAd()}},{key:"expandAd",value:function(){this.adUnit.expandAd()}},{key:"collapseAd",value:function(){this.adUnit.collapseAd()}},{key:"skipAd",value:function(){this.adUnit.skipAd()}},{key:"getAdLinear",value:function(){return this.adUnit.getAdLinear()}},{key:"getAdWidth",value:function(){return this.adUnit.getAdWidth()}},{key:"getAdHeight",value:function(){return this.adUnit.getAdHeight()}},{key:"getAdExpanded",value:function(){return this.adUnit.getAdExpanded()}},{key:"getAdSkippableState",value:function(){return this.props.adSkippableState=this.adUnit.getAdSkippableState(),this.props.adSkippableState}},{key:"getAdRemainingTime",value:function(){return this.adUnit.getAdRemainingTime()}},{key:"getAdDuration",value:function(){return this.adUnit.getAdDuration()}},{key:"setAdVolume",value:function(e){this.adUnit.setAdVolume(e)}},{key:"getAdVolume",value:function(){return this.adUnit.getAdVolume()}},{key:"getAdCompanions",value:function(){return this.adUnit.getAdCompanions()}},{key:"getAdIcons",value:function(){return this.adUnit.getAdIcons()}}])&&s(e.prototype,i),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();i.default=e},{"./config.js":18,"./constants.js":19,"./util/clock.js":31,"./util/getMediaFileType.js":33}]},{},[41])(41)});
//# sourceMappingURL=vista-2-1-64.js.map